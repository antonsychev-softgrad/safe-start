["/*1bd5268371f60e4d594046e95bf0c76f4e471202",42,273779,"util.Geolocation",241523,41,"[\"Ext.util.GeoLocation\"],config:{autoUpdate:true,frequency:10000,latitude:null,longitude:null,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,speed:null,timestamp:null,allowHighAccuracy:false,timeout:Infinity,maximumAge:0,provider:undefined},updateMaximumAge:function(){if(this.watchOperation){this.updateWatchOperation()}},updateTimeout:function(){if(this.watchOperation){this.updateWatchOperation()}},updateAllowHighAccuracy:function(){if(this.watchOperation){this.updateWatchOperation()}},applyProvide",303867,33,"Geolocation){if(!a){if(navigator&&navigator.geolocation){a=navigator.geolocation}else{if(window.google){a=google.gears.factory.create(\"beta.geolocation\")}}}}else{this.fireEvent(\"locationerror\",this,false,false,true,\"This device does not support Geolocation.\")}return a},updateAutoUpdate:function(a,b){var c=this,f=c.getProvider();if(b&&f){clearInterval(c.watchOperationId);c.watchOperationId=null}if(a){if(!f){c.fireEvent(\"locationerror\",c,false,false,true,null);return}try{c.updateWatchOperation()}catch(d){c.fireEvent(\"locationerror\",c,false,false,true,d.message)}}},updateWatchOperation:function(){var a=this,b=a.getProvider();if(a.watchOperationId){clearInterval(a.watchOperationId)}function c(){b.getCurrentPosition(Ext.bind(a.fireUpdate,a),Ext.bind(a.fireError,a),a.parseOptions())}c();a.watchOperationId=setInterval(c,this.getFrequency())},updateLocation:function(h,a,c){var b=this,g=b.getProvider();var f=function(i,e){if(e){b.fireError(e)}else{b.fireEvent(\"locationerror\",b,false,false,true,i)}if(h){h.call(a||b,null,b)}};if(!g){f(null);return}try{g.getCurrentPosition(function(e){b.fireUpdate(e);if(h){h.call(a||b,b,b)}},function(e){f(null,e)},c||b.parseOptions())}catch(d){f(d.message)}},fireUpdate:function(a){var b=this,c=a.coords;this.position=a;b.setConfig({timestamp:a.timestamp,latitude:c.latitude,longitude:c.longitude,accuracy:c.accuracy,altitude:c.altitude,altitudeAccuracy:c.altitudeAccuracy,heading:c.heading,speed:c.speed});b.fireEvent(\"locationupdate\",b)},fireError:function(a){var b=a.code;this.fireEvent(\"locationerror\",this,b==a.TIMEOUT,b==a.PERMISSION_DENIED,b==a.POSITION_UNAVAILABLE,a.message==undefined?null:a.message)},parseOptions:function(){var b=this.getTimeout(),a={maximumAge:this.getMaximumAge(),enableHighAccuracy:this.getAllowHighAccuracy()};if(b!==Infinity){a.timeout=b}return a},destroy:function(){this.setAutoUpdate(false)}});Ext.define(\"Ext.Map\",{extend:Ext.Container,xtype:\"map\",isMap",286959,41,"map\",useCurrentLocation:false,map:null,geo:null,mapOptions:{}",240223,52,"if(!(window.google||{}).maps){this.setHtml(\"Google Maps API is required\"",429808,49,"on({painted:\"doResize\",scope:this});this.innerElement.on(\"touchstart\",\"onTouchStart\",thi",247851,64,287378,41,247970,33,",children:[{reference:\"mapContainer\",className:Ext.baseCSSPrefix+\"map-container\"}]}]}},onTouchStart:function(a){a.makeUnpreventable()},applyMapOptions:function(a){return Ext.merge({},this.options,a)},updateMapOptions:function(d){var a=this,c=(window.google||{}).maps,b=this.getMap();if(c&&b){b.setOptions(d)}if(d.center&&!a.isPainted()){a.un(\"painted\",\"doMapCenter\",this);a.on(\"painted\",\"doMapCenter\",this,{delay:150,single:true})}},doMapCenter:function(){this.setMapCenter(this.getMapOptions().center)},getMapOptions:function(){return Ext.merge({},this.options||this.getInitialConfig(\"mapOptions\"))},updateUseCurrentLocation:function(a){this.setGeo(a);if(!a){this.setMapCenter()}},applyGeo",311440,38,"util.Geolocation,this.getGeo())},updateGeo:function(b,a){var c={locationupdate:\"onGeoUpdate\",locationerror:\"onGeoError\",scope:this};if(a){a.un(c)}if(b){b.on(c);b.updateLocation()}},doResize:function(){var b=(window.google||{}).maps,a=this.getMap();if(b&&a){b.event.trigger(a,\"resize\")}},renderMap:function(){var d=this,f=(window.google||{}).maps,b=d.mapContainer,a=d.getMapOptions(),e=d.getMap(),c;if(f){if(Ext.os.is.iPad){Ext.merge({navigationControlOptions:{style:f.NavigationControlStyle.ZOOM_PAN}},a)}a.zoom=a.zoom||12;a.mapTypeId=a.mapTypeId||f.MapTypeId.ROADMAP;if(!a.hasOwnProperty(\"center\")){a.center=new f.LatLng(37.381592,-122.135672)}if(a.center&&a.center.latitude&&!Ext.isFunction(a.center.lat)){a.center=new f.LatLng(a.center.latitude,a.center.longitude)}if(b.dom.firstChild){Ext.fly(b.dom.firstChild).destroy()}if(e){f.event.clearInstanceListeners(e)}d.setMap(new f.Map(b.dom,a));e=d.getMap();c=f.event;c.addListener(e,\"zoom_changed\",Ext.bind(d.onZoomChange,d));c.addListener(e,\"maptypeid_changed\",Ext.bind(d.onTypeChange,d));c.addListener(e,\"center_changed\",Ext.bind(d.onCenterChange,d));c.addListenerOnce(e,\"tilesloaded\",Ext.bind(d.onTilesLoaded,d))}},onTilesLoaded:function(){this.fireEvent(\"maprender\",this,this.map)},onGeoUpdate:function(a){if(a){this.setMapCenter(new google.maps.LatLng(a.getLatitude(),a.getLongitude()))}},onGeoError:Ext.emptyFn,setMapCenter:function(d){var a=this,c=a.getMap(),b=(window.google||{}).maps;if(b){if(!a.isPainted()){a.un(\"painted\",\"doMapCenter\",this);a.on(\"painted\",\"doMapCenter\",this,{delay:150,single:true});return}d=d||new b.LatLng(37.381592,-122.135672);if(d&&!(d instanceof b.LatLng)&&\"longitude\" in d){d=new b.LatLng(d.latitude,d.longitude)}if(!c){a.renderMap();c=a.getMap()}if(c&&d instanceof b.LatLng){c.panTo(d)}else{this.options=Ext.apply(this.getMapOptions(),{center:d})}}},onZoom",183417,32,"MapOptions(),c=this.getMap(),b;b=(c&&c.getZoom)?c.getZoom():a.zoom||10;this.options=Ext.apply(a,{zoom:b});this.fireEvent(\"zoomchange\",this,c,b)},onType",556805,32,"MapOptions(),c=this.getMap(),a;a=(c&&c.getMapTypeId)?c.getMapTypeId():b.mapTypeId;this.options=Ext.apply(b,{mapTypeId:a});this.fireEvent(\"typechange\",this,c,a)},onCenter",556805,32,"MapOptions(),c=this.getMap(),a;a=(c&&c.getCenter)?c.getCenter():b.center;this.options=Ext.apply(b,{center:a});this.fireEvent(\"centerchange\",this,c,",278775,43,"Geo());var a=this.getMap();if(a&&(window.google||{}).maps){google.maps.event.clearInstanceListeners(a",430713,52,273821,5047,"Img\",{extend:Ext.Component,xtype:[\"image\",\"img\"],config:{src",337180,33,"img\",imageCls:Ext.baseCSSPrefix+\"img-image\",backgroundCls:Ext.baseCSSPrefix+\"img-background\",mode:\"background\"},beforeI",548416,34,"onLoad=Ext.Function.bind(a.onLoad,a);a.onError=Ext.Function.bind(a.onError,a)",288510,52,"relayEvents(a.renderElement,\"*\");a.element.on({tap:\"onTap\",scope:a})},hid",518992,36,"hiddenSrc=this.hiddenSrc||this.getSrc();this.setSrc(null)},show",562947,38,"hiddenSrc){this.setSrc(this.hiddenSrc);delete this.hiddenSrc}},updateMode",251147,32,"mageCls(),b=c.getBackgroundCls();if(d===\"background\"){if(c.imageElement){c.imageElement.destroy();delete c.imageElement;c.updateSrc(c.getSrc())}c.replaceCls(a,b)}else{c.imageElement=c.element.createChild({tag:\"img\"});c.replaceCls(b,a)}},updateImageCls:function(b,a){this.replaceCls(a,b)},updateBackgroundCls:function(b,a){this.replaceCls(a,b)},",285702,34,"tap\",this,a)},onAfterRender:function(){this.updateSrc(this.getSrc())},updateSrc:function(a){var b=this,c;if(b.getMode()===\"background\"){c=this.imageObject||new Image()}else{c=b.imageElement.dom}this.imageObject=c;c.setAttribute(\"src\",Ext.isString(a)?a:\"\");c.addEventListener(\"load\",b.onLoad,false);c.addEventListener(\"error\",b.onError,false)},detachListeners:function(){var a=this.imageObject;if(a){a.removeEventListener(\"load\",this.onLoad,false);a.removeEventListener(\"error\",this.onError,false)}},onLoad:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"load\",this,a)},onError:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"error\",this,a)},doSetWidth:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setWidth(b);",548857,33,"Height:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setHeight(b);this.callParent(",361064,36,"detachListeners();Ext.destroy(this.imageObject,this.imageElement);delete this.imageObject;delete this.imageElement",278830,32920,"carousel.Item\",{extend:Ext.Decorator,config:{baseCls:\"x-carousel-item\",component:null,translatable:true}});Ext.define(\"Ext.carousel.Indicato",430787,32,"carouselindicator\",alternateClassName:\"Ext.Carousel.Indicato",430832,38,"carousel-indicator\",direction:\"horizonta",549358,49,"indicators=[];this.element.on({tap:\"onTap\",scope:this})}",429352,79,"c,a,b);if(a===\"horizontal\"){this.setBottom(0);this.setRight(null)}else{this.setRight(0);this.setBottom(null)}},addIndicator:function(){this.indicators.push(this.element.createChild({tag:\"span\"}))},removeIndicator:function(){var a=this.indicators;if(a.length>0){a.pop().destroy()}},setActiveIndex:function(b){var e=this.indicators,d=this.activeIndex,a=e[d],f=e[b],c=this.getBaseCls();if(a){a.removeCls(c,null,\"active\")}if(f){f.addCls(c,null,\"active\")}this.activeIndex=b;return this},onTap:function(f){var g=f.touch,a=this.element.getPageBox(),d=a.left+(a.width/2),b=a.top+(a.height/2),c=this.getDirection();if((c===\"horizontal\"&&g.pageX>=d)||(c===\"vertical\"&&g.pageY>=b)){this.fireEvent(\"next\",this)}else{this.fireEvent(\"previou",474522,34,"d=this.indicators,b,c,a;for(b=0,c=d.length;b<c;b++){a=d[b];a.destroy()}d.length=0",278830,38,"util.TranslatableGroup",151614,32,"Abstract,config:{items:[],activeIndex:0,itemLength:{x:0,y:0}},applyItems:function(a){return Ext.Array.from(a)},doTranslate:function(n,m){var l=this.getItems(),p=this.getActiveIndex(),j=this.getItemLength(),d=j.x,c=j.y,h=typeof n==\"number\",g=typeof m==\"number\",e,f,k,o,b,a;for(f=0,k=l.length;f<k;f++){o=l[f];if(o){e=(f-p);if(h){b=n+e*d}if(g){a=m+e*c}o.translate(b,a)}}}});Ext.define(\"Ext.carousel.Carousel",337052,48,"Carousel\",xtype:\"carousel\",config:{baseCls:\"x-carousel\",direction:\"horizontal\",directionLock:false,animation:{duration:250,easing:{type:\"ease-out\"}},indicator:true,ui:\"dark\",itemConfig:{},bufferSize:1,itemLength:null},itemLength:0,offset:0,flickStartOffset:0,flickStartTime:0,dragDirection:0,count:0,painted:false,activeIndex:-1",298555,34,"element.on(",154576,59,519111,41,"SizeChange\",this);this.carouselItems=[];this.orderedCarouselItems=[];this.inactiveCarouselItems=[];this.hiddenTranslation=0},updateBufferSize:function(n){var l=Ext.carousel.Item,h=n*2+1,m=this.isRendered(),c=this.innerElement,g=this.carouselItems,f=g.length,e=this.getItemConfig(),d=this.getItemLength(),j=this.getDirection(),b=j===\"horizontal\"?\"setWidth\":\"setHeight\",a,k;for(a=f;a<h;a++){k=Ext.factory(e,l);if(d){k[b].call(k,d)}k.setLayoutSizeFlags(this.LAYOUT_BOTH);g.push(k);c.append(k.renderElement);if(m&&k.setRendered(true)){k.fireEvent(\"renderedchange\",this,k,true)}}this.getTranslatable().setActiveIndex(n)},setRendered:function(g){var a=this.rendered;if(g!==a){this.rendered=g;var b=this.items.items,d=this.carouselItems,c,f,e;for(c=0,f=b.length;c<f;c++){e=b[c];if(!e.isInnerItem()){e.setRendered(g)}}for(c=0,f=d.length;c<f;c++){d[c].setRendered(g)}return true}return false},onSizeChange:function(){this.refreshSizing();this.refreshCarouselItems();this.refreshActiveItem()},onItemAdd:function(c,b",518592,33,"d=this.getInnerItems().indexOf(c),a=this.getIndicator();if(a&&c.isInnerItem()){a.addIndicator()}if(d<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(d)&&!this.isItemsInitializing){this.refreshActiveItem()}},doItemLayoutAdd:function(a){if(a.isInnerItem()",507530,35,"},onItemRemove:function(f,b",518592,33,"h=this.getInnerItems().indexOf(f),a=this.getIndicator(),d=this.carouselItems,c,e,g;if(f.isInnerItem()&&a){a.removeIndicator()}if(h<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(h)){for(c=0,e=d.length;c<e;c++){g=d[c];if(g.getComponent()===f){g.setComponent(null)}}this.refreshActiveItem()}},doItemLayoutRemove:function(a){if(a.isInnerItem()",507530,35,"},onInnerItemMove:function(b,c,a){if((this.isIndexDirty(c)||this.isIndexDirty(a))){this.refreshActiveItem()}},doItemLayoutMove:function(a){if(a.isInnerItem()",507530,35,"},isIndexDirty:function(b){var a=this.getActiveIndex(),c=this.getBufferSize();return(b>=a-c&&b<=a+c)},getTranslatable",153919,39,153582,49,"Group;a.setItems(this.orderedCarouselItems);a.on(\"animationend\",\"onAnimationEnd\",this)}return a},onDragStart:function(f){var d=this.getDirection(),b=f.absDeltaX,a=f.absDeltaY,c=this.getDirectionLock();this.isDragging=true;if(c){if((d===\"horizontal\"&&b>a)||(d===\"vertical\"&&a>b)){f",227764,54,229667,38,";this.dragStartOffset=this.offset;this.dragDirection=0},onDrag:function(j",228477,34,"k=this.dragStartOffset,l=this.getDirection(),m=l===\"horizontal\"?j.deltaX:j.deltaY,a=this.offset,i=this.flickStartTime,c=this.dragDirection,b=Ext.Date.now(),h=this.getActiveIndex(),f=this.getMaxItemIndex(),d=c,g;if((h===0&&m>0)||(h===f&&m<0)){m*=0.5}g=k+m;if(g>a){c=1}else{if(g<a){c=-1}}if(c!==d||(b-i)>300){this.flickStartOffset=a;this.flickStartTime=b}this.dragDirection=c;this.setOffset(g)},onDragEnd:function(j",157113,42,"j);this.isDragging=false;var a=Ext.Date.now(),i=this.itemLength,g=i/2,f=this.offset,m=this.getActiveIndex(),c=this.getMaxItemIndex(),h=0,l=f-this.flickStartOffset,b=a-this.flickStartTime,k=this.getIndicator(),d;if(b>0&&Math.abs(l)>=10){d=l/b;if(Math.abs(d)>=1){if(d<0&&m<c){h=-1}else{if(d>0&&m>0){h=1}}}}if(h===0){if(m<c&&f<-g){h=-1}else{if(m>0&&f>g){h=1}}}if(k){k.setActiveIndex(m-h)}this.animationDirection=h;this.setOffsetAnimated(h*i)},applyAnimation:function(a){a.easing=Ext.factory(a.easing,Ext.fx.easing.EaseOut);",224019,49,"getIndicator();this.currentAxis=(b===\"horizontal\")?\"x\":\"y\";if(a){a.setDirection(b)}},setOffset:function(a){this.offset=a",223773,33,"Axis(this.currentAxis,a+this.itemOffset);return this},setOffsetAnimated:function(b){var a=this.getIndicator();if(a){a.setActiveIndex(this.getActiveIndex()-this.animationDirection)}this.offset=b",223773,33,"Axis(this.currentAxis,b+this.itemOffset,this.getAnimation());return this},onAnimationEnd:function(b){var c=this.getActiveIndex(),a=this.animationDirection,e=this.currentAxis,f=b[e],d=this.itemLength,g;if(a===-1){g=d+f}else{if(a===1){g=f-d}else{g=f}}g-=this.itemOffset;this.offset=g;this.setActiveItem(c-a",520784,34,"Sizing();this.refreshActiveItem()},refreshSizing:function(){var a=this.element,b=this.getItemLength(),e={x:0,y:0},c,d;if",190848,35,"){d=a.getWidth()}else{d=a.getHeight()}this.hiddenTranslation=-d;if(b===null){b=d;c=0}else{c=(d-b)/2}this.itemLength=b;this.itemOffset=c;e[this.currentAxis]=b;this.getTranslatable().setItemLength(e)},refreshOffset:function(){this.setOffset(this.offset)},refreshActiveItem:function(){this.doSetActiveItem(this.getActiveItem())},getActiveIndex:function(){return this.activeIndex},refreshActiveIndex:function(){this.activeIndex=this.getInnerItemIndex(this.getActiveItem())},refreshCarouselItems:function(){var a=this.carouselItems,",178684,41,"c.getTranslatable().refresh()}this.refreshInactiveCarouselItems()},refreshInactiveCarouselItems:function(){var a=this.inactiveCarouselItems,f=this.hiddenTranslation,c=this.currentAxis,b,e,d;for(b=0,e=a.length;b<e;b++){d=a[b];d.translateAxis(c,f)}},getMaxItemIndex",254813,34,".length-1},getInnerItemIndex",252512,46,"},getInnerItem",252238,42,"applyActiveItem:function(){var b=this.callParent(arguments),a;if(b){a=this.getInnerItemIndex(b);if(a!==-1){this.activeIndex=a;return b}}},doSetActiveItem:function(g){var q=this.getActiveIndex(),e=this.getMaxItemIndex(),m=this.getIndicator(),c=this.getBufferSize(),k=this.carouselItems.slice(),n=this.orderedCarouselItems,p={},o={},a,l,b,f,h,j,d;if(k.length===0",507530,36,"n.length=0;if(g){b=g.getId();o[b]=g;p[b]=c;if(q>0){for(f=1;f<=c;f++){h=q-f;if(h>=0){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c-f}else{break}}}if(q<e){for(f=1;f<=c;f++){h=q+f;if(h<=e){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c+f}else{break}}}for(f=0,j=k.length;f<j;f++){d=k[f];l=d.getComponent();if(l){b=l.getId();if(p.hasOwnProperty(b)){k.splice(f,1);f--;j--;delete o[b];n[p[b]]=d}}}for(b in o){if(o.hasOwnProperty(b)){a=o[b];d=k.pop();d.setComponent(a);n[p[b]]=d}}}this.inactiveCarouselItems.length=0;this.inactiveCarouselItems=k;this.refreshOffset();this.refreshInactiveCarouselItems();if(m){m.setActiveIndex(q)}},next:function(){this.setOffset(0);if(this.activeIndex===this.getMaxItemIndex()){return this}this.animationDirection=-1;this.setOffsetAnimated(-this.itemLength);return this},previous:function(){this.setOffset(0);if(this.activeIndex===0){return this}this.animationDirection=1;this.setOffsetAnimated(this.itemLength);return this},applyIndicator",220015,40,"carousel.Indicator",279593,33,"if(a){this.insertFirst(a);a.setUi(this.getUi());a.on({next:\"next\",previous:\"previous\",scope:this})}",157984,32,"carouselItems.slice();this.carouselItems.length=0;Ext.destroy(a,this.getIndicator(),this.translatable);this.callParent();delete this.carouselItems",551488,33,311750,145896,"device.communicator.Default\",{SERVER_URL:\"http://localhost:3000\",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:\"0\",generateId:function(){return String(++this.idSeed)},getId:function(a){var b=a.$callbackId;if(!b){a.$callbackId=b=this.generateId()}return b},getCallbackId:function(h,d){var c=this.callbackIdMap,b=this.callbackDataMap,g,a,f,e;if(!d){a=this.globalScopeId}else{if(d.isIdentifiable){a=d.getId()}else{a=this.getId(d)}}f=this.getId(h);if(!c[a]){c[a]={}}if(!c[a][f]){g=this.generateId();e={callback:h,scope:d};c[a][f]=g;b[g]=e}return c[a][f]},getCallbackData:function(a){return this.callbackDataMap[a]},invoke:function(c,a){var b=this.getCallbackData(c);b.callback.apply(b.scope,a)},send:function(c){var e,d,b,f;if(!c){c={}}else{if(c.callbacks){e=c.callbacks;d=c.scope;delete c.callbacks;delete c.scope;for(b in e){if(e.hasOwnProperty(b)){f=e[b];if(typeof f==\"function\"){c[b]=this.getCallbackId(f,d)}}}}}c.__source=document.location.href;var a=this.doSend(c);return(a&&a.length>0)?JSON.parse(a):null},doSend:function(a){var c=new XMLHttpRequest();c.open(\"GET\",this.SERVER_URL+\"?\"+Ext.Object.toQueryString(a)+\"&_dc=\"+new Date().getTime(),false);try{c.send(null);return c.responseText}catch(b){if(a.failure){this.invoke(a.failure)}else{if(a.callback){this.invoke(a.callback)}}}}});Ext.define(\"Ext.device.communicator.Android\",{extend:Ext.device.communicator.Default,doSend:function(a){a.__source=document.location.href;return window.Sencha.action(JSON.stringify(a))}});Ext.define(\"Ext.device.Communicator",231760,41,"if(Ext.os.is.Android){return new Ext.device.communicator.Android()}return new Ext.device.communicator.Default()}});Ext.define(\"Ext.device.notification.Abstract\",{show:function(a){if(!a.message){throw (\"[Ext.device.Notification#show] You passed no message\")}if(!a.buttons){a.buttons=\"OK\"}if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons]}if(!a.scope){a.scope=this}return a},vibrate",361311,32,"evice.notification.PhoneGap\",{extend:Ext.device.notification.Abstract,show:function(){var c=this.callParent(arguments),f=c.buttons,a=function(g){if(c.callback){c.callback.apply(c.scope,(c.buttons)?[c.buttons[g-1].itemId.toLowerCase()]:[])}};var e=f.length;if(e&&typeof f[0]!=\"string\"){var b=[],d;for(d=0;d<e;d++){b.push(f[d].text)}f=b.join(\",\")}navigator.notification.confirm(c.message,a,c.title,f)},vibrate:function(){navigator.notification.vibrate(2000)}});Ext.define(\"Ext.device.notification.Sencha\",{extend:Ext.device.notification.Abstract,show",240365,34,"arguments);Ext.device.Communicator.send({command:\"Notification#show\",callbacks:{callback:a.callback},scope:a.scope,title:a.title,message:a.message,buttons:a.buttons.join(\",\")})},vibrate:function(){Ext.device.Communicator.send({command:\"Notification#vibrate\"})}});Ext.define(\"Ext.device.notification.Simulator\",{extend:Ext.device.notification.Abstract,msg:null,show",240365,34,"arguments),e=[],d=a.buttons.length,c,b,g,f;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()}}e.push(c)}this.msg=Ext.create(\"Ext.MessageBox\");f=this.msg;g=function(h){if(a.callback){a.callback.apply(a.scope,[h])}};this.msg.show({title:a.title,message:a.message,scope:this.msg,buttons:e,fn:g})},vibrate:function(){var c=[\"@-webkit-keyframes vibrate{\",\"    from {\",\"        -webkit-transform: rotate(-2deg);\",\"    }\",\"    to{\",\"        -webkit-transform: rotate(2deg);\",\"    }\",\"}\",\"body {\",\"    -webkit-animation: vibrate 50ms linear 10 alternate;\",\"}\"];var b=",47403,40,";var ",540100,36,"innerHTML=c.join(\"\\n\");b.appendChild(a);setTimeout(function(){b.removeChild(a)},400)}});Ext.define(\"Ext.device.Notification",231760,45,"a=Ext.browser.is;if(a.WebView){if(a.PhoneGap){return Ext.create(\"Ext.device.notification.PhoneGap\")}else{return Ext.create(\"Ext.device.notification.Sencha\")}}else{return Ext.create(\"Ext.device.notification.Simulator\")}}",457627,89805,"navigation.Bar\",{extend:Ext.TitleBar",298327,141,"layout:{type:\"hbox\"},defaultBackButtonText:\"Back\",animation:{duration:300},useTitleForBackButtonText:null,view:null,android2Transforms:false,backButton:{align:\"left\",ui:\"back\",hidden:true}},platformConfig:[{platform:[\"blackberry\"],animation:false}]",280239,36,"!a.items){a.items=[]}this.backButtonStack=[];this.activeAnimations=[];this.callParent([a]",453743,86,"updateBackButton:function(a,b){if(b){this.remove(b)}if(a){this.add(a);a.on({scope:this,tap:this.onBackButtonTap})}},onBack",503836,37,"back\",this)},updateView:function(b){var d=this,j=d.getBackButton(),a,c,f,g,e,h;d.getItems();if(b){a=b.getInnerItems();for(c=0;c<a.length;c++){g=a[c];e=(g.getTitle)?g.getTitle():g.config.title;d.backButtonStack.push(e||\"&nbsp;\")}h=d.getTitleText();if(h===undefined){h=\"\"}d.setTitle(h);f=d.getBackButtonText();if(f){j.setText(f);j.show()}}},onViewAdd:function(c,e){var d=this,b=d.backButtonStack,a,f;d.endAnimation();f=(e.getTitle)?e.getTitle():e.config.title;b.push(f||\"&nbsp;\");a=b.length>1;d.doChangeView(c,a,false)},onViewRemove:function(c){var d=this,b=d.backButtonStack,a;d.endAnimation();b.pop();a=b.length>1;d.doChangeView(c,a,true)},doChangeView:function(k,c,g){var r=this,o=r.leftBox,e=o.element,f=r.titleComponent,m=f.element,n=r.getBackButton(),l=r.getTitleText(),h=r.getBackButtonText(),q=r.getAnimation()&&k.getLayout().getAnimation(),p=q&&q.isAnimation&&k.isPainted(),d,i,a,j,b;if(p){i=r.createProxy(o.element);e.setStyle(\"opacity\",\"0\");n.setText(h);n[c?\"show\":\"hide\"]();a=r.createProxy(f.element.getParent());m.setStyle(\"opacity\",\"0\");r.setTitle(l);d=r.measureView(i,a,g);j=d.left;b=d.title;r.isAnimating=true;r.animate(e,j.element);r.animate(m,b.element,function(){m.setLeft(d.titleLeft);r.isAnimating=false;r.refreshTitlePosition()})",514079,32,"&&!this.getAndroid2Transforms()){i.ghost.destroy();a.ghost.destroy()}else{r.animate(i.ghost,j.ghost);r.animate(a.ghost,b.ghost,function(){i.ghost.destroy();a.ghost.destroy()})}}else{if(c){n.setText(h);n.show()}else{n.hide()}r.setTitle(l)}},measureView:function(e,u,k){var w=this,j=w.element,v=w.leftBox.element,p=w.titleComponent.element,l=Math.min(j.getWidth()/3,200),q=v.getWidth(),c=j.getX(),m=j.getWidth(),n=p.getX(),d=p.getLeft(),s=p.getWidth(),r=e.x,t=e.width,a=e.left,h=Ext.browser.is.AndroidStock2&&!this.getAndroid2Transforms(),i,b,f,x,o,g;g=c-r-t;if(k){i=g;b=Math.min(n-t,l)}else{b=g;i=Math.min(n-c,l)}if(h){f={element:{from:{left:i,opacity:1},to:{left:0,opacity:1}}}}else{f={element:{from:{transform:{translateX:i},opacity:0},to:{transform:{translateX:0},opacity:1}},ghost:{to:{transform:{translateX:b},opacity:0}}}}g=c-n+q;if((a+s)>n){o=c-n-s}if(k){p.setLeft(0);b=c+m-n-s;if(o!==undefined){i=o}else{i=g}}else{i=c+m-n-s;if(o!==undefined){b=o}else{b=g}i=Math.max(d,i)}if(h){x={element:{from:{left:i,opacity:1},to:{left:d,opacity:1}}}}else{x={element:{from:{transform:{translateX:i},opacity:0},to:{transform:{translateX:d},opacity:1}},ghost:{to:{transform:{translateX:b},opacity:0}}}}return{left:f,title:x,titleLeft:d}},animate:function(b,a,e){var c=this,d;b.setLeft(0);a=Ext.apply(a,{element:b,easing:\"ease-in-out\",duration:c.getAnimation().duration||250,preserveEndState:true});d=new Ext.fx.Animation(a);d",255623,33,"e){e.call(c)}},c);Ext.Animator.run(d);c.activeAnimations.push(d)},endAnimation:function(){var a=this.activeAnimations,d,b,c;if(a){c=a.length",537616,32,"Animating){d.stopAnimation()}else{d.destroy()}}this.activeAnimations=[]}",299917,37,"!this.isAnimating){this.callParent()}},getBackButtonText:function(){var b=this.backButtonStack[this.backButtonStack.length-2],a=this.getUseTitleForBackButtonText();if(!a){if(b){b=this.getDefaultBackButtonText()}}return b},getTitleText:function(){return this.backButtonStack[this.backButtonStack.length-1]},beforePop:function(b){b--;for(var a=0;a<b;a++){this.backButtonStack.pop()}},doSetHidden:function(a){if(!a){this.element.setStyle({position:\"relative\",top:\"auto\",left:\"auto\",width:\"auto\"})}else{this.element.setStyle({position:\"absolute\",top:\"-1000px\",left:\"-1000px\",width:this.element.getWidth()+\"px\"})}},createProxy:function(b){var e,a,f,d,c;e=b.dom.cloneNode(true);e.id=b.id+\"-proxy\";b.getParent().dom.appendChild(e);e=Ext.get(e);a=b.getX();f=b.getY();d=b.getLeft();c=b.getWidth();e.setStyle(\"position\",\"absolute\");e.setX(a);e.setY(f);e.setHeight(b.getHeight());e.setWidth(c);return{x:a,y:f,left:d,width:c,ghost:e}}});Ext.define(\"Ext.navigation.",337048,52,"NavigationView\",xtype:\"navigationview",532000,37,"navigationview\",navigationBar:{docked:\"top\"},defaultBackButtonText:\"Back\",useTitleForBackButtonText:false",549264,32,"duration:300,easing:\"ease-out\",type:\"slide\",direction:\"left\"}}}",495760,41,"NavigationBar();a.on({back:b.onBackButtonTap,scope:b});b.relayEvents(a,\"rightbuttontap\");b.relayEvents(b,{add:\"push\",remove:\"pop\"})},applyLayout:function(a){a=a||{};return a},onBackButtonTap:function(){this.pop();this.fireEvent(\"back\",this)},push:function(a){return this.add(a)},pop:function(a){if(this.beforePop(a)){return this.doPop()}},beforePop:function(f){var e=this,g=e.getInnerItems();",246163,37,"var d=g.length-1,a;for(a=d;a>=0;a--){if((Ext.isString(f)&&Ext.ComponentQuery.is(g[a],f))||(Ext.isObject(f)&&f==g[a])){f=d-a;break}}if(!Ext.isNumber(f)){return false}}var c=g.length,b;if(!Ext.isNumber(f)||f<1){f=1}f=Math.min(f,c-1);if(f){e.getNavigationBar().beforePop(f);b=g.splice(-f,f-1);for(a=0;a<b.length;a++){this.remove(b[a])}return true}return false},doPop:function(){var a=this,b=this.getInnerItems();a.remove(b[b.length-1]);return this.getActiveItem()},getPreviousItem:function(){var a=this.getInnerItems();return a[a.length-2]},updateUseTitleForBackButtonText:function(b){var a=this.getNavigationBar();if(a){a.setUseTitleForBackButtonText(b)}},updateDefaultBackButtonText:function(b){var a=this.getNavigationBar();if(a){a.setDefaultBackButtonText(b)}},applyNavigationBar:function(a){if(!a){a={hidden:true,docked:\"top\"}}if(a.title){delete a.title}a.view=this;a.useTitleForBackButtonText=this.getUseTitleForBackButtonText();return Ext.factory(a,Ext.navigation.Bar,this.getNavigationBar())},updateNavigationBar:function(a,b){if(b){this.remove(b,true)}if(a){this.add(a)}",254983,36,"b=this,c=b.getInnerItems();b.getItems();if(!b.initialized){d=c.length-1}return this.callParent([d,a])},doResetActiveItem:function(d){var a=this,c=a.getInnerItems(),b=a.getLayout().getAnimation();if(d>0){if(b&&b.isAnimation){b.setReverse(true)}a.setActiveItem(d-1);a.getNavigationBar().onViewRemove(a,c[d],d)}},doRemov",192541,35,".getAnimation();if(a&&a.isAnimation){a.setReverse(false",564187,32,253829,51,"!this.isItemsInitializing&&b.isInnerItem()){this.setActiveItem(b);this.getNavigationBar().onViewAdd(this,b,a",167062,39,"add\",this,b,a)}},reset:function(){return this.pop(this.getInnerItems().length",547411,18770,"associations:[{type:\"hasOne\",",570215,35,"name:\"company",566177,162,",getFullName:function(){return this.get(\"firstName\")+\" \"+this.get(\"lastName\"",576192,35,590079,831,626345,516,568527,36,566378,129,566524,1037,590910,201,"Ext.ux.event.recognizer.MouseWheelDrag",485612,37,486916,48,462159,52,"onMouseWheel=Ext.Function.bind(this.onMouseWheel,this);this.fireDragEnd=Ext.Function.bind(this.fireDragEnd,this);if(document.hasOwnProperty(\"onmousewheel\")){document.addEventListener(\"mousewheel\",this.onMouseWheel,true)}else{document.addEventListener(\"wheel\",this.onMouseWheel,true)}},onMouseWheel:function(h){var a=Ext.event.publisher.Dom.prototype,i=a.getElementTarget(h.target),g=a.getBubblingTargets(i),d=h.hasOwnProperty(\"wheelDeltaX\")?h.wheelDeltaX:h.wheelDelta,c=h.hasOwnProperty(\"wheelDeltaY\")?h.wheelDeltaY:h.wheelDelta,f=[{targets:g}],j,b;if(h.deltaX){d=h.deltaX*-50}if(h.deltaY){c=h.deltaY*-50}h=new Ext.event.Dom(h);b=h.time;this.lastEvent=h;this.lastTouches=f;if(!this.startPoint){this.startTime=b;this.startPoint=j={x:h.pageX,y:h.pageY};this.previousPoint=j;this.previousTime=b;this.lastPoint=j;this.lastTime=b;this.fire(\"dragstart\",h,f,this.getInfo(h))}j=this.lastPoint;this.previousTime=this.lastTime;this.previousPoint=j;this.lastPoint={x:j.x+d,y:j.y+c};this.lastTime=b;this.fire(\"drag\",h,f,this.getInfo(h));clearTimeout(this.dragEndTimer);this.dragEndTimer=setTimeout(this.fireDragEnd,50)},fireDragEnd:function(){var a=this.lastEvent;this.fire(\"dragend\",a,this.lastTouches,this.getInfo(a));this.startTime=0;this.previousTime=0;this.lastTime=0",489458,89,";this.lastEvent=null;this.lastTouches=null},getInfo:function(j,i){var a=0.14,d=j.time,b=this.startPoint,f=this.previousPoint,c=this.startTime,m=this.previousTime,n=this.lastPoint,h=(n.x-b.x)*a,g=(n.y-b.y)*a,l=(n.x-f.x)*a,k=(n.y-f.y)*a;n.x+=h;n.y+=g;f.x+=l;f.y+=k;return{flick:{velocity:{x:0,y:0}},touch:i,startX:b.x,startY:b.y,previousX:f.x,previousY:f.y,pageX:n.x,pageY:n.y,deltaX:h,deltaY:g,absDeltaX:Math.abs(h),absDeltaY:Math.abs(g),previousDeltaX:l,previousDeltaY:k,time:d,startTime:c,previousTime:m,deltaTime:d-c,previousDeltaTime:d-m",594735,43,569040,741,591124,1094,"460:6",592223,70,"370:500",586848,40,590540,132,"UserProfile",592480,117,"UserProfile",592605,49,"UserProfile",592662,2844,"alertsPage:\"SafeStartAlert",595499,2809,"Alert",598283,1902,596752,52,600237,4770,"var a=this;setInterval(function(){a.updateAlertsBadge()},60000)},config:{control:{},refs:{pages:\"SafeStartMainView\",",605034,53,"alertsPage:\"SafeStartAlertsPage",605085,142,",updateAlertsBadge:function(){var a=this;",582018,108,"SafeStartApp.AJAX(\"company/\"+",582204,35,"+\"/get-new-incoming?now=\"+new Date().getTime(),{},function(b){if(SafeStartApp.userModel.get(\"role\")==\"superAdmin\"){a.getPages().getTabBar().getComponent(2).setBadgeText(b.alerts)}else{a.getPages().getTabBar().getComponent(1).setBadgeText(b.alerts)}},function(){},true)",594736,36,584007,231,"additional",579616,65,569217,35,584267,213,",{name:\"alert_descrip",580061,36,",{name:\"alert_critical\",type:\"int\",defaultValue:1",580208,55,584534,55,615282,280,"Question",615567,38,615544,45,"description",615594,809,"checkboxfield\",label:\"Alert critical?\",required:false,name:\"alert_critical\"",616317,34,"description\",required:false,name:\"alert_description",606362,38,616430,923,"alert_description",617286,34,"critical",617824,51,617376,269,"alert_critical",617286,34,"description",617824,56,617673,85,"alert_critical\"].show();this.getFields()[\"alert_description\"].show",617373,38,617775,77,"alert_critical",617286,34,"description",617824,86,582956,79,",",592926,37,583037,482,"listeners:{itemtap:function(){this.up(",583043,35,").onSelectAction.apply(this.up(",583043,35,"),arguments)},back:function(){this.up(",583043,35,").onSelectChangeAction.apply(this.up(",583043,35,"),arguments)}}",590560,33,583551,64,"text:\"Add Inspection Field\",ui:\"action\",iconCls:\"add",572414,39,"UpdateChecklistComponent\").addAction()}",583640,332,",getInfoPanel:function(){return this.down(\"panel[name=field-info]\")},getNavMain",583908,64,",getAddButton:function(){",618479,3170,621670,80,599632,42,"load",621865,355,"override(Ext.data.proxy.Ajax,{",368964,414,"this.lastRequest=",369378,48,605227,34,579159,98,",listeners:{scope:this,beforeload:function(a){if(a.getProxy().lastRequest&&Ext.Ajax.isLoading(a.getProxy().lastRequest)){Ext.Ajax.abort(a.getProxy().lastRequest)}}}}",569854,50,"c,b,d){if(b.getError()&&b.getError().statusText!=\"transaction aborted\"",569926,68,"b",569995,70,"if(b.getResponse()&&b.getResponse().responseText){var a=Ext.decode(b.getResponse().responseText);if(a.meta&&parseInt(a.meta.errorCode)){",624109,32,569928,68,"data.errorMessage)}else",569927,64,"Operation filed\")}",579423,41,570059,48,570106,49,605261,334,"model.Vehicle",569040,115,584267,72,579753,203,"currentOdometerKms\",defaultValue:\"unknown",579946,61,"currentOdometerHours\",defaultValue:\"unknown\"",579998,61,"enabled\",defaultValue:1},{name:\"warrantyStartD",569467,42,580099,37,"SafeStartApp.model.User\",associationKey:\"responsibleUsers\",name:\"responsibleUsers\"},{type:\"hasMany\",",588031,32,"associationKey:\"users\",name:\"u",580203,276,605595,833,"5",606430,67,"fieldset\",title:\"Current odometer:\",items:[{xtype:\"textfield\",disabled:true,name:\"currentOdometerHours\",label:\"Hours\"},{xtype:\"textfield\",disabled:true,name:\"currentOdometerKms\"",606466,850,607815,1398,621183,37,"Root());",603854,145,609342,543,608121,53,603856,35,599632,42,"load",609965,32,608107,54,"NodeById(a));this.getNavMain().goToLeaf",608128,33,"NodeById(a+\"-info\"",610057,909,",b",610970,191,611194,635,"getChecklistForm",611567,84,"additional][isIncluded",611764,95,"b,a){var c=this.getChecklistForms();var e=[];var a=",607680,32,";var d=a.getAlertsStore();var f=[];Ext.each(c,function(h){var g=h.query(\"[triggerable]\");var i=false;Ext.each(g,function(j){if(j.config.fieldId){d.each(function(k){if(k.get(\"fieldId\")===j.config.fieldId&&k.get(\"active\")===true){Ext.Array.include(f,k);i=true}})}});e.push({groupName:h.config.groupName,additional:h.config.additional,alert:i})});a.updateReview(e,f)},onReviewSubmitBtnTap:function(b){var a=Ext.create(\"Ext.MessageBox\",{cls:\"sfa-messagebox-confirm\",message:\"Please confirm your submission\",buttons:[{ui:\"confirm\",action:\"confirm\",text:\"Confirm\"},{ui:\"action\",text:\"Cancel\",handler:function(c){c.up(\"sheet[cls=sfa-messagebox-confirm]\").destroy()}}]});",607680,32,".add(a)},onReviewConfirmBtnTap:function(b){var j=this,k=[],d=",607680,32,",c=this.getChecklistForms(),n=[],h=d.down(\"container[cls=sfa-vehicle-inspection-gps]\"),f=d.down(\"field[name=current-odometer-kms]\").getValue(),p=d.down(\"field[name=current-odometer-hours]\").getValue(),a=\"\",m,e,q=d.inspectionRecord,o=\"\",l=[],r;if(h.down(\"togglefield\").getValue()&&h.gps){m=h.gps;a=m.getLatitude()+\";\"+m.getLongitude()}Ext.each(d.query(\"container[name=alert-container]\"),function(s){e=s.config.alertModel;k.push({fieldId:parseInt(e.get(\"fieldId\")),comment:e.get(\"comment\"),images:e.get(\"photos\")})});Ext.each(c,function(s){l=s.query(\"field\");Ext.each(l,function(t){if(t.isHidden()){return}switch(t.xtype){case\"checkboxfield\":if(t.isChecked()){value=\"Yes\"}else{value=\"No\"}n.push({id:t.config.fieldId,value:value});break;case\"radiofield\":if(t.isChecked()){n.push({id:t.config.fieldId,value:t.getValue()})}break;case\"textfield\":n.push({id:t.config.fieldId,value:t.getValue()});break;case\"datepickerfield\":n.push({id:t.config.fieldId,value:t.getValue()});break}})});r={date:Date.now(),fields:n,alerts:k,odometer:f,odometer_hours:p,gps:a};if(q){o=\"?checklistId=\"+q.get(\"checkListId\")}var i=this.getNavMain();var g=this.getVehicleInspectionsPanel();SafeStartApp.AJAX(\"vehicle/\"+d.vehicleId+\"/completechecklist\"+o,r,function(s){d.clearChecklist();d.down(\"sheet[cls=sfa-messagebox-confirm]\").destroy();var w=i.getActiveItem();var v=d.vehicleId;var t=i.getStore().getNodeById(v+\"-inspections\");var u=i.getStore().getNodeById(v).indexOf(t);g.inspectionsStore.on({load:function(z,y){var x=z.findRecord(\"hash\",s.checklist);g.loadChecklistDetails(x)},single:true});i.fireEvent(\"itemtap\",i,w,u,null,t)})},showAlerts:function(){",613695,40,"Company",607200,116,611987,362,612206,58," button[action=submit]\":{tap:\"onReviewSubmit",612096,58,"sheet[cls=sfa-messagebox-confirm] button[action=confirm]\":{tap:\"onReviewConfirm",612096,57,"Details button[action=print]\":{tap:\"downloadVehicleInspectionDetailsPdf",612203,51,"sPanel\":{editInspection:\"onEditInspectionAction",614159,57,"itemtap:\"onSelectAction\",back:\"hideSelection",614237,62,612482,174,"vehicleUsers",612600,44,"UsersPanel\",vehicleAlerts",612600,44,"AlertsPanel\",vehicleInspectionDetails",612600,54,"Details\",vehicleInspections",612600,54,"sPanel",612654,289,"}",607315,282,607651,63,607592,54,"break;case\"inspections",607504,36,"this.getVehicleInspectionsPanel());this.getVehicleInspectionsPanel().loadList(arguments[4].parentNode);break;case\"alerts",607504,36,"this.getVehicleAlertsPanel());this.getVehicleAlertsPanel().loadL",607607,39,607714,63,"4",607778,34,";case\"users\":this.loadUsers",607610,85,"UsersPanel());break;case\"check-list\":var a=this.getVehicleInspectionDetailsPanel();",607743,34,"a);a",607596,39,"parentNode,arguments[4].get(\"checkListId\"));break}},hideSelection",608047,52,"10)},checklistStores:{},checkListTrees:{",612942,33,"Ext.Object.each(this.checkListTrees,function(a,b){b.hide()});if(!this.checklistStores[this.selectedNodeId]){this.checklistStores[this.selectedNodeId]",587339,39,"Checklist\");this.checklistStores[this.selectedNodeId]",610237,59,"if(!this.checkListTrees[this.selectedNodeId]){this.checkListTrees[this.selectedNodeId]=new ",582943,35,"Vehicl",613389,32,"checklistStores[this.selectedNodeId]}",609584,48,"heckListTrees[this.selectedNodeId])}this.checkListTrees[this.selectedNodeId].show()},loadUsers",610825,57,"users\",{},function(c){a.getVehicleUsersPanel().buildList(c,b)})},updateUsersAction:function(a,c,b){SafeStartApp.AJAX(\"vehicle/\"+c+\"/update-users\",{value:a},function(d){})},downloadVehicleInspectionDetailsPdf:function(a){window.open(\"/api/checklist/\"+a.config.checkListId+\"/generate-pdf\",\"_blank\")},onEditInspectionAction:function(c,b,d){var a=this;",607743,34,607680,34,"SafeStartApp.AJAX(\"vehicle/\"+c+\"/getchecklist?checklistId=\"+b,{},function(e",610909,46,"e.checklist,c,d);a.loadAlerts(b)})},loadAlerts",610825,51,"inspection/\"+b+\"/alerts",610894,47,"fillAlertsData(c)})",607813,743,614810,152,"if(SafeStartApp.companyModel){",608700,47,"}else{",614962,51,"}",608748,1137,608121,53,603856,35,599632,42,"load",609965,32,608107,54,"NodeById(a));this.getNavMain().goToLeaf",608128,33,"NodeById(a+\"-info\"))",610803,163,",b",610970,191,611194,635,"getChecklistForm",611567,84,"additional][isIncluded",611764,95,"b,a){var c=this.getChecklistForms();var e=[];var a=",607680,32,";var d=a.getAlertsStore();var f=[];Ext.each(c,function(h){var g=h.query(\"[triggerable]\");var i=false;Ext.each(g,function(j){if(j.config.fieldId){d.each(function(k){if(k.get(\"fieldId\")===j.config.fieldId&&k.get(\"active\")===true){Ext.Array.include(f,k);i=true}})}});e.push({groupName:h.config.groupName,additional:h.config.additional,alert:i})});a.updateReview(e,f)},onReviewSubmitBtnTap:function(b){var a=Ext.create(\"Ext.MessageBox\",{cls:\"sfa-messagebox-confirm\",message:\"Please confirm your submission\",buttons:[{ui:\"confirm\",action:\"confirm\",text:\"Confirm\"},{ui:\"action\",text:\"Cancel\",handler:function(c){c.up(\"sheet[cls=sfa-messagebox-confirm]\").destroy()}}]});",607680,32,".add(a)},onReviewConfirmBtnTap:function(b){var j=this,k=[],d=",607680,32,",c=this.getChecklistForms(),n=[],h=d.down(\"container[cls=sfa-vehicle-inspection-gps]\"),f=d.down(\"field[name=current-odometer-kms]\").getValue(),p=d.down(\"field[name=current-odometer-hours]\").getValue(),a=\"\",m,e,q=d.inspectionRecord,o=\"\",l=[],r;if(h.down(\"togglefield\").getValue()&&h.gps){m=h.gps;a=m.getLatitude()+\";\"+m.getLongitude()}Ext.each(d.query(\"container[name=alert-container]\"),function(s){e=s.config.alertModel;k.push({fieldId:parseInt(e.get(\"fieldId\")),comment:e.get(\"comment\"),images:e.get(\"photos\")})});Ext.each(c,function(s){l=s.query(\"field\");Ext.each(l,function(t){if(t.isHidden()){return}switch(t.xtype){case\"checkboxfield\":if(t.isChecked()){value=\"Yes\"}else{value=\"No\"}n.push({id:t.config.fieldId,value:value});break;case\"radiofield\":if(t.isChecked()){n.push({id:t.config.fieldId,value:t.getValue()})}break;case\"textfield\":n.push({id:t.config.fieldId,value:t.getValue()});break;case\"datepickerfield\":n.push({id:t.config.fieldId,value:t.getValue()});break}})});r={date:Date.now(),fields:n,alerts:k,odometer:f,odometer_hours:p,gps:a};if(q){o=\"?checklistId=\"+q.get(\"checkListId\")}var i=this.getNavMain();var g=this.getVehicleInspectionsPanel();SafeStartApp.AJAX(\"vehicle/\"+d.vehicleId+\"/completechecklist\"+o,r,function(s){d.clearChecklist();d.down(\"sheet[cls=sfa-messagebox-confirm]\").destroy();var w=i.getActiveItem();var v=d.vehicleId;var t=i.getStore().getNodeById(v+\"-inspections\");var u=i.getStore().getNodeById(v).indexOf(t);g.inspectionsStore.on({load:function(z,y){var x=z.findRecord(\"hash\",s.checklist);g.loadChecklistDetails(x)},single:true});i.fireEvent(\"itemtap\",i,w,u,null,t)})",613695,467,614656,59," button[action=submit]\":{tap:\"onReviewSubmi",614008,60,"sheet[cls=sfa-messagebox-confirm] button[action=confirm]\":{tap:\"onReviewConfirmBtnTap",614159,1134,567567,84,"45",600409,34,567687,227,",{xtype:\"fieldset\",title:\"Change password:\",items:[{xtype:\"textfield\",name:\"new_password\",label:\"New\"},{xtype:\"textfield\",name:\"confirm_password\",label:\"Confirm\"}]",572928,33,567946,697,"Companies",574879,101,568748,279,569781,74,"config:{autoLoad:false,listeners:{scope:this,beforeload:function(a){if(a.getProxy().lastRequest&&Ext.Ajax.isLoading(a.getProxy().lastRequest)){Ext.Ajax.abort(a.getProxy().lastRequest)}}}}",569854,50,"c,b,d){if(b.getError()&&b.getError().statusText!=\"transaction aborted\"",569926,68,"b",569995,70,"if(b.getResponse()&&b.getResponse().responseText){var a=Ext.decode(b.getResponse().responseText);if(a.meta&&(parseInt(a.meta.errorCode)!=0)){",624109,32,569928,68,"data.errorMessage)}else",569927,64,"Operation filed\")}",579423,88,570060,47,570106,2970,"!f){return}",573079,311,",filterStoreDataByFiled:function(a,c,b){a.clearFilter(!!c);if(!c){return}a.filter(function(d){return(d.get(b)==c)}",576192,41,573430,366,"Companies",573800,1115,"if(SafeStartApp.userModel.get(\"role\")==\"companyUser\"",586446,242,"}else{",574922,309,586689,66,575270,96,586989,36,580816,49,575415,778,";this.getStore().addListener(\"beforeload\",function(){this.goToNode(this.getStore().getRoot())},this",576192,35,"components.Update",605261,39,"view.components.UpdateChecklist",622923,177,569002,32,"hecklistAlert",569040,48,"field",584112,38,"alertMessage\",type:\"string\"},{name:\"alertD",569218,34,"critical",414045,35,"},{name:\"triggerValue\",type:\"string\"},{name:\"comment",584448,32,",{name:\"photos",413691,40,"active",414045,35,580448,37,"ChecklistAlert",580492,38,570201,41,"hecklistAlert\",proxy:{type:\"memory\"}}});Ext.define(\"Ext.ux.Fileup\",{extend:Ext.Button,xtype:\"fileupload\"",262064,138,",hidden:true",262202,50,",{tag:\"div\",className:Ext.baseCSSPrefix+\"loading-spinner\",reference:\"loadingElement\",hidden:true,children:[",262125,41,"loading-top\"",262123,43,"loading-right\"",262123,43,"loading-bottom\"",262123,43,"loading-left\"}]},{tag:\"form\",reference:\"formElement\",hidden:false,children:[{tag:\"input\",reference:\"fileElement\",type:\"file\",name:\"userfile\",tabindex:-1,hidden:false,style:\"opacity:0;position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;z-index:16777270;\"}]}],defaultStates:{browse:{text:\"Browse\",cls:Ext.baseCSSPrefix+\"fileup\",ui:\"filebrowse\"},ready:{text:\"Upload\",cls:Ext.baseCSSPrefix+\"fileup-ready\",ui:\"fileready\"},uploading:{text:\"Uploading\",cls:Ext.baseCSSPrefix+\"fileup-uploading\",ui:\"fileupload\",loading:true}},currentState:null",524603,32,"fileup\",name:\"userfile\",autoUpload:false,states:true,loadAsDataUrl:false,url:\"\",signRequestEnabled:false,signHeader:\"\",defaultSuccessCodes:[200,201]},applyStates:function(a){var b=this;if(a){if(Ext.isObject(a)){return Ext.merge({},b.defaultStates,a)}else{return b.defaultStates}}else{return b.defaultStates",288509,53,"fileElement.dom.onchange=function(){a.onChanged.apply(a,arguments)};a.on({scope:a,buffer:250,tap:a.onButtonTap});a.changeState(\"browse\")},onButtonTap:function(){var b=this;switch(b.currentState){case\"ready\":b.changeState(\"uploading\");var a=b.fileElement.dom.files[0];if(!b.getLoadAsDataUrl()){b.fireEvent(\"uploadstart\",a);b.doUpload(a)}else{b.doLoad(a)}break}},onChanged",339011,35,".files.length>0){a.fireAction(\"ready\",[b.target.files[0]],function(){a.changeState(\"ready\")},a)}else{Ext.device.Notification.show({title:\"Error\",message:\"File selected but not accessible\",buttons:Ext.MessageBox.OK,callback:function(){a.changeState(\"browse\")}})}},changeState:function(c){var b=this;var a=b.getStates();if(Ext.isDefined(a[c])){if(a[c].text){b.setText(a[c].text)}else{b.setText(\"\")}if(a[c].cls){b.setCls(a[c].cls)}else{b.setCls(\"\")}if(a[c].ui){b.setUi(a[c].ui)}else{b.setUi(\"normal\")}if(a[c].loading){b.loadingElement.show()}else{b.loadingElement.hide()}switch(c){case\"browse\":b.currentState=\"browse\";b.reset();break;case\"ready\":b.currentState=\"ready\";b.fileElement.hide();if(b.getAutoUpload()){b.onButtonTap()}break;case\"uploading\":b.currentState=\"uploading\";break}}else{}},doLoad:function(b){var c=this;var a=new FileReader();a.onerror=function(f){var d;switch(f.target.error.code){case f.target.error.NOT_FOUND_ERR:d=\"File Not Found\";break;case f.target.error.NOT_READABLE_ERR:d=\"File is not readable\";break;case f.target.error.ABORT_ERR:break;default:d=\"Can not read file\"}c.fireEvent(\"loadfailure\",d,this,f)};a.onload=function(d){c.fireEvent(\"loadsuccess\",this.result,this,d);c.changeState(\"browse\")};a.readAsDataURL(b)},doUpload:function(b){var c=this;var a=new XMLHttpRequest();if(a.upload&&a.upload.addEventListener){a.upload.onprogress=function(f){if(f.lengthComputable){var d=(f.loaded/f.total)*100;c.setBadgeText(d.toFixed(0)+\"%\")}};a.onreadystatechange=function(f){if(this.readyState===4){if(Ext.Array.indexOf(c.getDefaultSuccessCodes(),parseInt(this.status))!==-1){var d=c.decodeResponse(this);if(d&&d.success){c.fireEvent(\"success\",d,this,f)}else{if(d&&d.message){c.fireEvent(\"failure\",d.message,d,this,f)}else{c.fireEvent(\"failure\",\"Unknown error\",d,this,f)}}}else{c.fireEvent(\"failure\",this.status+\" \"+this.statusText,d,this,f)}c.changeState(\"browse\")}};a.upload.onerror=function(d){c.fireEvent(\"failure\",this.status+\" \"+this.statusText,{},this,d)}}a.open(\"POST\",c.getUrl());if(c.getSignRequestEnabled()){c.signRequest(a,function(d){d.send(c.getForm(b))})}else{a.send(c.getForm(b))}},getForm:function(a){var b=new FormData();b.append(this.getName(),a);return b},reset:function(){var a=this;a.setBadgeText(null);a.formElement.dom.reset();a.fileElement.show()},decodeResponse:function(a){return Ext.decode(a.responseText,true)},signRequest:function(a,d){var b=this;var c=b.getSignHeader();if(!c){b.fireEvent(\"failure\",\"Request signing header is not defined\")}b.signProvider(function(e){a.setRequestHeader(c,e);d(a)},function(e){b.fireEvent(\"failure\",\"Request signing is failed! \"+e,{},this)})},signProvider:function(b,a){b(\"default-token\"",576192,35,"components.FileUpload\",{extend:Ext.ux.Fileup,alias:\"widget.imageupload\",doUpload:function(b){var c=this;var a=new XMLHttpRequest();if(a.upload&&a.upload.addEventListener){a.upload.onprogress=function(f){if(f.lengthComputable){var d=(f.loaded/f.total)*100;c.setBadgeText(d.toFixed(0)+\"%\")}};a.onreadystatechange=function(f){if(this.readyState===4){var d=c.decodeResponse(this);if(Ext.Array.indexOf(c.getDefaultSuccessCodes(),parseInt(this.status,10))!==-1){if(d&&d.meta&&d.meta.status==200&&!parseInt(d.meta.errorCode,10)){c.fireEvent(\"success\",c,d.data,this,f)}else{c.fireEvent(\"failure\",\"Unknown error\",d,this,f)}}else{c.fireEvent(\"failure\",c,this.status+\" \"+this.statusText,{},this,f)}c.changeState(\"browse\")}};a.upload.onerror=function(d){c.fireEvent(\"failure\",c,this.status+\" \"+this.statusText,{},this,d)}}a.open(\"POST\",c.getUrl());if(c.getSignRequestEnabled()){c.signRequest(a,function(d){d.send(c.getForm(b))})}else{a.send(c.getForm(b))}",582927,34,576227,125,"cls:\"sfa-",576332,64,"this.callParent();this.setAlertsStore(SafeStartApp.store.ChecklistAlerts.create({}))},setAlertsStore:function(a){this._alertsStore=a},getAlertsStore:function(){return this._alertsStore},alerts:[],setAlerts:function(a,b){this.alerts[a]=b},getAlerts:function(a){return this.alerts[a]},fieldValueExists:function(b){var d,a,c;for(c=0,a=b.length;c<a;c++){d=b[c];switch(d.type){case\"group\":if(this.fieldValueExists(d.items)){return true}break;default:if(Ext.isString(d.fieldValue)&&d.fieldValue.length){return true}break}}return false},clearChecklist:function(){this.inspectionRecord=null;this.getAlertsStore().removeAll()",576459,43,"a){this.remove(a)},this)},fillAlertsData:function(b){var a=this.getAlertsStore();var c;Ext.each(b,function(d){c=a.findRecord(\"fieldId\",d.field.id);if(c){c.set(\"photos\",d.images);c.set(\"comment\",d.description)}})},loadChecklist:function(a,e,g){var d=this;var f=[],h=[],b=[];this.clearChecklist();this.vehicleId=e||0;this.isNew=!g;this.inspectionRecord=g;a=a||[];var c={painted:function(i){d",611449,38,"this",611488,41,"this.config.checked}};Ext.each(a,function(k,j){var i=this.createForm(k,j);if(k.additional){i",576595,34,"h.push(i",576637,38,"k.groupName,checked:this.isNew?false:this.fieldValueExists(k.fields),checklistGroupId:k.groupId,listeners:this.isNew?{}:c})}else{i.name=\"checklist-card\";f.push(i)}},this);this.add(f);if(b.length){this.add(this.createChoiseAdditionalCard(b))}this.add(h);this.add(this.createReviewCard())},createChoiseAdditionalCard:function(a){return",577184,40,576837,44,"layout:{type:\"vbox\",align:\"center\"},items:[{xtype:\"fieldset\",maxWidth:900,width:\"100%\",defaults:{labelWidth:\"80%\"},items:a},",577264,38,"A",576981,180,"},createReviewCard:function(){return",577184,73,"layout:{type:\"vbox\",align:\"center\"}",577256,227,"},createForm:function(c,b){var d=[];if(b!==0){d.push({text:\"Prev\",action:\"prev\"})}d.push({text:\"Next\",action:\"next\"});var a=this.createFields(c",577534,53,"c.groupName",576991,110,"d",577765,53,"layout:{type:\"vbox\",align:\"center\"},groupId:c.groupId,additional:c.additional,groupName:c.groupName",577849,33,"d){var b=[];var c=this.getAlertsStore();var f;var g;var e;var a;Ext.each(d,function(h){f=[];g=null;a=[];e=[];if(h.additional){e=this.createFields(h.items,true)}if(Ext.isArray(h.alerts)&&h.alerts[0]){f=h.alerts[0];g",626043,32,"ChecklistAlert\",{alertMessage:f.alertMessage,critical:f.critical,alertDescription:f.alertDescription,triggerValue:f.triggerValue,fieldId:h.fieldId,photos:[]});c.add(g)}switch(h.type){case\"text\":b.push(this.createTextField(h));break;case\"radio\":b.push(this.createRadioField(h,g,e));break;case\"datePicker\":b",578050,33,"h));break;case\"group\":b.push(this.createGroupField(h));break;case\"checkbox\":b.push(this.createCheckboxField(h,g,e",578192,57,"h.type,\"warn\");break}Ext.each(a,function(i){b.push(i)})},this);return b",578286,73,"maxWidth:900,width:\"100%\",value:a.fieldValu",578357,49,",e,c){var a=\"checklist-radio-\"+b.fieldId,d=[];if(e&&RegExp(e.get(\"triggerValue\"),\"i\").test(b.fieldValue)){e.set(\"active\",true)}Ext.each(b.options,function(f){var g=b.fieldValue||\"n/a\";d",578475,32,"f.value,label:f.label,labelWidth:50,fieldId:b.fieldId,name:a,checked:new RegExp(f.value,\"i\").test(g),listeners:{check:function(h){var i=h.getValue();h.up(\"fieldset\").fireEvent(\"checkTriggers\",i)}}})});return{xtype:\"fieldset\",alerts:b.alerts,additional:b.additional,additionalFieldsConfig:c,triggerValue:b.triggerValue,triggerable:true",295524,36,"defaults:{labelAlign:\"right\"},maxWidth:900,width:\"100%\"",578674,43,"d,alertRecord:e,listeners:{checkTriggers:function(h){var i=this.config.alertRecord,f;if(i){if(RegExp(i.get(\"triggerValue\"),\"i\").test(h)){if(i.get(\"critical\")){Ext.Msg.alert(\"DANGER\",i.get(\"alertMessage\"))}i.set(\"active\",true)}else{i.set(\"active\",false)}}if(this.config.additional){if(!this.hasOwnProperty(\"additionalFields\")){this.additionalFields=[];var g=this.up(\"component\").indexOf(this);Ext.each(c,function(j){g++;j.hidden=true;this.additionalFields.push(this.up(\"component\").insert(g,j))},this)}f=this.additionalFields;if(RegExp(this.config.triggerValue,\"i\").test(h)){Ext.each(f,function(j){j.show(true);j.enable()})}else{Ext.each(f,function(j){j.hide(true);j.disable()})}}},hide:function(f){if(Ext.isArray(this.additionalFields)){Ext.each(this.additionalFields,function(g){g.hide()})}},show:function(f){if(Ext.isArray(this.additionalFields)){this.fireEvent(\"checkTriggers\",this.down(\"radiofield[checked]\").getValue())}}}",578718,68,"maxWidth:900,width:\"100%",578784,53,"a.fieldValue||Date.now()",578837,34,",c,b){if(c&&RegExp(c.get(\"triggerValue\"),\"i\").test(a.fieldValue)){c.set(\"active\",true)}return{xtype:\"checkboxfield\",maxWidth:900,additional:a.additional,width:\"100%\",label:a.fieldName,labelWidth:\"90%\",triggerValue:a.triggerValue,fieldId:a.fieldId,alerts:a.alerts,alertRecord:c,checked:a.fieldValue==\"yes\",triggerable:true,listeners:{check:function(d){this.fireEvent(\"checkTriggers\",\"Yes\")},uncheck:function(d){this.fireEvent(\"checkTriggers\",\"No\")},checkTriggers:function(f){var g=this.config.alertRecord,d;if(g){if(RegExp(g.get(\"triggerValue\",\"i\").test(f))){if(g.get(\"critical\")){Ext.Msg.alert(\"DANGER\",g.get(\"alertMessage\"))}g.set(\"active\",true)}else{g.set(\"active\",false)}}if(this.config.additional){if(!this.hasOwnProperty(\"additionalFields\")){this.additionalFields=[];var e=this.up(\"component\").indexOf(this);Ext.each(b,function(h){e++;h.hidden=true;this.additionalFields.push(this.up(\"component\").insert(e,h))},this)}d=this.additionalFields;if(RegExp(this.config.triggerValue,\"i\").test(f)){Ext.each(d,function(h){h.show(true);h.enable()})}else{Ext.each(d,function(h){h.hide(true);h.disable()})}}}",578998,57,"maxWidth:900,width:\"100%",579053,72,",updateReview:function(b,c){var a=this.down(",611727,39,");a.removeAll();a.add(this.createVehicleDetailsView(b));a.add(this.createAdditionalFields());a.add(this.createAlertsView(c))},createAdditionalFields:function(){var a=1000,b=0;if(!this.isNew&&this.inspectionRecord){a=this.inspectionRecord.get(\"odometerKms\");b=this.inspectionRecord.get(\"odometerHours\")}return[{xtype:\"container\",width:\"100%\",cls:\"sfa-vehicle-inspection-gps\",maxWidth:900,items:[{xtype:\"togglefield\",label:\"GPS\",labelWidth:50,listeners:{change:function(h,f,d,g,e){var c=h.up(\"container[cls=sfa-vehicle-inspection-gps]\");if(g){if(!c.gps){c.gps=Ext.create(\"Ext.util.Geolocation\")}}}}}]},{xtype:\"container\",name:\"vehicle-inspection-additional-fields\",width:\"100%\",maxWidth:900,height:\"auto\"",600410,33,"Current odometer\",layout:{type:\"vbox\"},width:\"100%\",items:[{xtype:\"spinnerfield\",name:\"current-odometer-kms\",label:\"Kilometers\",stepValue:1000,required:true,value:a,minValue:1000},{xtype:\"spinnerfield\",name:\"current-odometer-hours\",label:\"Hours\",stepValue:24,value:b,minValue:0}]}]}]},createVehicleDetailsView:function(b){var a=[{xtype:\"titlebar\",title:\"Vehicle details\"}];Ext.each(b,function(c){a.push({xtype:\"container\",html:c.groupName,cls:c.alert?\"checklist-details-alerts\":\"checklist-details-ok\"})});return{xtype:\"fieldset\",width:\"100%\",maxWidth:900,items:a}},createAlertsView:function(b){var a=[{xtype:\"titlebar\",title:\"Alerts\"}];Ext.each(b,function(c){a.push({xtype:\"panel\",width:\"100%\",maxWidth:900,name:\"alert-container\",fieldId:c.get(\"fieldId\"),alertModel:c,items:[{xtype:\"container\",cls:\"checklist-alert-description\",html:c.get(\"alertDescription\")},{xtype:\"textfield\",label:\"Additional comments\",value:c.get(\"comment\"),listeners:{change:function(d,e){c.set(\"comment\",e)}}},this.createImageUploadPanel(c)]})},this);return a},createImageUploadPanel",577872,32,".get(\"photos\"),function(c){a.push({xtype:\"image\",height:70,margin:10,width:70,src:\"api/image/\"+c+\"/70x70\"})});return{xtype:\"panel\",name:\"image-container\",width:\"100%\",maxWidth:900,layout:\"box",590559,50,"xtype:\"imageupload\",autoUpload:true,url:\"api/upload-images\",name:\"image\",states:{browse:{text:\"Add photo\"},uploading:{loading:true}},listeners:{success:function(d,e){var c=d.up(\"panel[name=image-container]\");c.add({xtype:\"image\",height:70,margin:10,width:70,src:\"api/image/\"+e.hash+\"/70x70\"});var f=b.get(\"photos\");f.push(e.hash)}}}]}].concat(a",594734,37,"Alert",569040,115,569217,36,"lert_",569217,35,"thumbnail\",type:\"string\"},{name:\"images\",type:\"auto\",defaultValue:[]},{name:\"status\",type:\"string\",defaultValue:\"new",580095,41,"SafeStartApp.model.Comment\",name:\"comments\"},{type:\"hasOne\",",588031,32,"name:\"user\"},{type:\"hasOne\",",580548,35,"name:\"vehicle",580447,38,"Alert",580492,38,570201,40,"Alert",588061,41,"vehiclealert",588106,54,570349,96,"pages.panel.VehicleAlert",586763,54,"AlertPanel\",xtype:\"SafeStartVehicleAlertPanel\",requires:[],record:false,config:{title:\"Alert Information\",baseCls:\"x-show-contact\",layout:\"vbox\",scrollable:true",432590,36,"var a=this;this.uniqueId=Ext.id();this.callParent();this.add([{id:\"SafeStartVehicleAlertContent\"+this.uniqueId,tpl:['<div class=\"top\">','<div class=\"name\">{vehicle.title}<span>{vehicle.plantId}</span></div><div class=\"name\">{user.firstName} {user.lastName} at {title}<span>{alert_description}</span><span>{description}</span></div>',\"</div>\"].join(\"\")},{xtype:\"selectfield\",id:\"SafeStartVehicleAlertStatus\"+this.uniqueId,label:\"Status",615641,61,"new\",title:\"New\"},{rank:\"closed\",title:\"Closed\"}]}},{xtype:\"toolbar\",items:[",616800,112,"VehicleAlertPanel\").updateAction()}}]},{xtype:\"carousel\",direction:\"horizontal\",id:\"SafeStartVehicleAlertImages\"+this.uniqueId,height:400},{id:\"SafeStartVehicleAlertComments\"+this.uniqueId,tpl:['<div class=\"sfa-alert-comments\">',\"<h3>Comments:</h3>\",'<tpl for=\"comments\">','<div class=\"name\">{user.firstName} {user.lastName} at <b>{update_date}</b><br/>',\"<span>{content}</span>\",\"</div>\",\"</tpl>\",\"</div>\"].join(\"\")},{xtype:\"textareafield\",id:\"SafeStartVehicleAlertNewComment\"+this.uniqueId,label:\"New Comment\",maxRows:4},{xtype:\"toolbar\",items:[{xtype:\"button\",text:\"Delete\",name:\"delete-data",601215,69,"VehicleAlertPanel\").deleteAction()",589295,36,572764,79,"VehicleAlertPanel\").updateAction()}}]}])},updateRecord:function(b){if(!b){return}this.record=b;this.down(\"#SafeStartVehicleAlertContent\"+this.uniqueId).setData(b.data);this.setComments(this.record.raw.comments);var a=b.get(\"images\");if(a.length){this.down(\"#SafeStartVehicleAlertImages\"+this.uniqueId).show();Ext.each(a,function(c){this.down(\"#SafeStartVehicleAlertImages\"+this.uniqueId).add({xtype:\"image\",src:\"api/image/\"+c+\"/1024x768\"})},this)}else{this.down(\"#SafeStartVehicleAlertImages\"+this.uniqueId).hide()}this.down(\"#SafeStartVehicleAlertStatus\"+this.uniqueId).setValue(b.get(\"status\"))},updateAction:function(){var b=this;var a={};var c=this.record.getAssociatedData()[\"vehicle\"][\"id\"];a.status=this.down(\"#SafeStartVehicleAlertStatus\"+this.uniqueId).getValue();a.new_comment=this.down(\"#SafeStartVehicleAlertNewComment\"+this.uniqueId).getValue();SafeStartApp.AJAX(\"vehicle/\"+c+\"/alert/\"+this.record.get(\"id\")+\"/update\",a,function(d){b.record.set(\"status\",a.status);if(a.new_comment!=\"\"){b.record.raw.comments.push({user:SafeStartApp.userModel.data,content:a.new_comment,update_date:Ext.Date.format(new Date(),\"d/m/Y H:i\")})}b.setComments(b.record.raw.comments);b.down(\"#SafeStartVehicleAlertNewComment\"+b.uniqueId).setValue(\"\")})},setComments:function(a){if(a.length){this.down(\"#SafeStartVehicleAlertComments\"+this.uniqueId).show();this.down(\"#SafeStartVehicleAlertComments\"+this.uniqueId).setData({comments:a})}else{this.down(\"#SafeStartVehicleAlertComments\"+this.uniqueId).hide(",620749,108,"aler",603759,34,"vehicle/alert/\"+a.record.get(\"id\")+\"/delete\",{},function(b){a.getParent().pop();a.getParent().alertsStore.loadData()})}",576192,54,"Alerts\",{extend:Ext.navigation.View,alias:\"widget.SafeStartVehicleAlertsPanel\"",580815,50,"config:{navigationBar:{ui:\"sencha",589073,71,"name:\"search-alert",589142,46,"a){a.parent.parent.parent.down(\"list[name=vehicle-alerts]\")",575890,45,"a.parent.parent.parent",589237,32,"parent.parent.parent.down(\"list[name=vehicle-alerts]\").getStore(),a,\"alert_title\")}}},{xtype:\"selectfield\",name:\"filter-alert-by-type\",placeHolder:\"Status",615641,61,"\",title:\"All\"},{rank:\"new\",title:\"New\"},{rank:\"closed\",title:\"Closed",615916,32,"d,c,a,b){d.parent.parent.parent.filterStoreDataByFiled(d.parent.parent.parent.down(\"list[name=vehicle-alerts]\").getStore(),c,\"status\")}}},{xtype:\"button\",ui:\"action\",name:\"refresh-alerts",574530,44,"parent.parent.parent.down(\"list[name=vehicle-alerts]\").getStore().loadData()}}]},listeners:{push:function(a,b){this.hideFilters()},pop:function(a,b){this.showFilters()}}",334000,47,"alert",573855,38,"Alerts\");this.add(this.getListPanel())},getListPanel",574013,49,"vehicle-alerts\",title:\"Vehicle Alerts\",emptyText:\"No new Alerts\",itemTpl:['<div class=\"headshot\" style=\"background-image:url({thumbnail});\"></div>',\"{alert_description}\",\"<span>{user.firstName} {user.lastName} at {title}</span>\"].join(\"\"),cls:\"sfa-alerts\",store:this.alertsStore,listeners:{itemtap:function(e,c,d,b){a.onSelectAlertAction(e,c,d,b)}}}},loadList:function(b,a){this.vehicleId=b;this.alert",582252,33,"vehicleId\",this.vehicleId);this.alertsStore.loadData()},loadCompanyList:function(b,a){this.companyId=b;this.status=a;this.alert",582252,60,"if(this.status){this.alert",582252,33,"status\",this.status);this.down(\"selectfield[name=filter-alert-by-type]\").hide()}this.alertsStore.loadData()},onSelectAlertAction:function(d,b,c,a){if(this.alertView){this.alertView.destroy()}this.alertView",588591,37,"panel.VehicleAlert\");this.alertView.setRecord(a);this.push(this.alertView)},hideFilters:function(){this.down(\"selectfield[name=filter-alert-by-type]\").hide();this.down(\"searchfield[name=search-alert]\").hide();this.down(\"button[name=refresh-alerts]\").hide()},showFilters:function(){try{this.down(\"list[name=vehicle-alerts]\").deselectAll();if(!this.status){this.down(\"selectfield[name=filter-alert-by-type]\").show()}this.down(\"searchfield[name=search-alert]\").show();this.down(\"button[name=refresh-alerts]\").show()}catch(a){}",582927,34,"pages.panel.VehicleUsers",590094,50,"alias:\"widget.SafeStartVehicleUsersPanel\",requires:[],config:{name:\"vehicle-users\",cls:\"sfa-",576332,34,"vbox\"}",334000,41,"},users:[],vehicleId:0,buildList:function(b,a){this.users=b;this.vehicleId=a",576459,43,"c){this.remove(c)},this);this.add({xtype:\"formpanel",577255,47,"Vehicle Users\"}]});Ext.each(this.users,function(c){this.add({xtype:\"formpanel\",margin:\"2 20 2 20",605741,36,"userId\",value:c.id},{xtype:\"selectfield\",name:\"assigned\",label:c.firstName+\" \"+c.lastName",615642,60,"no\",title:\"No access\"},{rank:\"user\",title:\"User\"},{rank:\"responsible\",title:\"Responsible\"}]},value:c.assigned}]})},this);if(this.users",576779,37,"items:[{xtype:\"toolbar\",items:[",590698,81,"var c=this.up(\"SafeStartVehicleUsersPanel\");SafeStartApp.app.getController(\"CompanyVehicles\").updateUsersAction(c.getValue(),c.vehicleId,c)}}]}]})}else{this.add({xtype:\"formpanel\",margin:\"0 0 0 0\",html:\"No date for display\"})}},getValue:function(){this.value",576456,46,"a){if(a.getValues().userId){this.value.push(a.getValues())}},this);return this.value",594736,35,"VehicleInspection",569040,48,"checkListId\",type:\"int\"",569117,38,"creationDate\",type:\"datetime\",mapping:\"creation_date\"},{name:\"data\",type:\"auto\"},{name:\"gps\",type:\"string\"},{name:\"id\",type:\"number\"},{name:\"hash\",type:\"string\"},{name:\"odometerHours\",type:\"integer\",mapping:\"odometer_hours\"},{name:\"odometerKms\",type:\"integer\",mapping:\"odometer_kms\"}],associations:[{type:\"hasOne\",",580548,35,"name:\"vehicle",580447,45,"Inspection",580492,38,570201,40,"VehicleInspection\",proxy:{type:\"ajax",588107,53,570349,96,"pages.panel.VehicleInspectionDetails",576256,60,"Details\",requires:[],config:{layout:\"card\",margin:10",581597,39,"spection-details\",cls:\"sfa-vehicle-inspection-details\",scrollable:true,layout:{type:\"vbox\",align:\"center\",pack:\"middle\"}},{xtype:\"panel\",cls:\"sfa-vehicle-inspection-details-map\",layout:\"fit\",items:[{xtype:\"button\",top:20,left:80,text:\"Back\",handler:function(b){var a=b.up(\"SafeStartVehicleInspectionDetails\");a.setActiveItem(0",592670,47,"},loadChecklist:function(c,a){var b",610843,35,"a.get(\"checkListId\")+\"/getchecklistdata\",{},function(d){b.createView(c,d.checklist,a)},true,true)},createView:function(g,f,a){var d=[],b=g.responsibleUsers().first(),h;this.setActiveItem(0);this.down(\"panel[cls=sfa-vehicle-inspection-details]\").removeAll();d.push(this.createContainer(\"Project number\",g.get(\"projectNumber\")),this.createContainer(\"Project name\",g.get(\"projectName\")));if(b){d.push(this.createContainer(\"Operators name\",b.getFullName()))}d.push(this.createContainer(\"Date and Time\",f.creationDate.date));if(f.gpsCoords){h=f.gpsCoords.split(\";\");d.push(this.createMapsContainer(\"Location\",parseFloat(h[0]),parseFloat(h[1])))}this.createGroup(d);this.createGroup([this.createContainer(\"Plant ID\",g.get(\"plantId\")),this.createContainer(\"Registration\",g.get(\"registration\")),this.createContainer(\"Type of vehicle\",g.get(\"type\")),]);var e=g.get(\"serviceDueKm\")+\" km \"+g.get(\"serviceDueHours\")+\" hours\";var c=\"\";if(a.get(\"odometerKms\")){c+=a.get(\"odometerKms\")+\" km\"}if(a.get(\"odometerHours\")){c+=\" \"+a.get(\"odometerHours\")+\" hours\"}this.createGroup([this.createContainer(\"Service due\",e),this.createContainer(\"Current odometer\",c)]);this.createButtons(f.id);this.checkListId=f.id;this.vehicleId=g.get(\"id\");this.inspectionRecord=a;Ext.each(f.fieldsStructure,function(i){this.createFields(i.fields,f.fieldsData,f.alerts,i.groupName,1)},this)},createContainer:function(b,c,d){var a=d?\"sfa-vehicle-details-container-alert\":\"sfa-vehicle-details-container\";return{xtype:\"container\",cls:a,layout:{type:\"hbox\",align:\"left\",pack:\"left\"},width:\"100%\",maxWidth:700,items:[{xtype:\"container\",html:b},{xtype:\"spacer\",flex:1},{xtype:\"container\",html:c}]}},createMapsContainer:function(d,b,c){var a=this;return{xtype:\"container\",cls:\"sfa-vehicle-inspection-details-container2\",layout:{type:\"hbox\",align:\"left\",pack:\"left\"},width:\"100%\",maxWidth:700,items:[{xtype:\"container\",html:d},{xtype:\"spacer\",flex:1},{xtype:\"button\",ui:\"small\",text:\"Open map\",handler:function(g){var f=a.down(\"panel[cls=sfa-vehicle-inspection-details-map]\");var e=new google.maps.LatLng(b,c);var h=f.down(\"map\");if(h){h.marker.setPosition(e);h.getMap().setCenter(e)}else{f.add({xtype:\"map\",mapOptions:{center:e},listeners:{maprender:function(i){i.marker=new google.maps.Marker({position:e,title:\"Vehicle Inspection\",map:i.getMap()})}}})}a.setActiveItem(1)}}]}},createGroup:function(a,d,c){if(d){if(c==1){a.unshift({xtype:\"container\",cls:\"sfa-vehicle-inspection-details-title\",html:d})}else{a.unshift({xtype:\"container\",cls:\"sfa-vehicle-inspection-details-subtitle\",html:d})}}var b={xtype:\"container\",margin:\"0 0 10 0\",layout:{type:\"vbox\",align:\"center\",pack:\"middle\"},width:\"100%\",items:a};if(c>1){return b}this.down(\"panel[cls=sfa-vehicle-inspection-details]\").add(b)},createFields:function(a,c,f,e,d){var b=[];Ext.each(a,function(h){var g=false;switch(h.type){case\"group\":b.push(this.createFields(h.items,c,f,h.fieldName,d+1));break;case\"radio\":case\"text\":case\"checkbox\":Ext.each(f,function(i){if(i.field.id==h.fieldId){g=true}},this);Ext.each(c,function(i){if(i.id==h.fieldId){b.push(this.createContainer(h.fieldName,i.value,g))}},this);break;case\"datePicker\":Ext.each(c,function(j){if(j.id==h.fieldId){if(j.value){var i=new Date(j.value);b.push(this.createContainer(h.fieldName,Ext.Date.format(i,\"Y-m-d\")))}else{b.push(this.createContainer(h.fieldName,\"N/A\"))}}},this);break}},this);if(b.length){return this.createGroup(b,e,d)}},createButtons:function(a){this.down(\"panel[cls=sfa-vehicle-inspection-details]\").add({xtype:\"toolbar\",margin:\"0 0 10 0\",items:[{ui:\"confirm\",action:\"print\",checkListId:a,text:\"Print\"}]}",576192,64,"s\",{extend:Ext.navigation.View",576275,41,"sPanel\"",580815,50,"config:{navigationBar:{items:[{name:\"edit-inspection\",align:\"right\",hidden:true,text:\"Edit\",handler:function(c){var a=c.up(\"SafeStartVehicleInspectionsPanel\");var b=a.down(\"SafeStartVehicleInspectionDetails\");var e=b.checkListId;var d=b.vehicleId;a.removeChecklistDetails();a.fireEvent(\"editInspection\",d,e,b.inspectionRecord)}},{name:\"delete-inspection\",align:\"right\",hidden:true,text:\"Delete\",handler:function(a){console.log(\"Delete inspection handler\")}}]},listeners:{push:function(a,b){this.changeButtons(b)},pop:function(a,b){this.changeButtons(a)},back:function(){this.hideButtons()}}",334000,47,"inspection",573855,38,"VehicleInspections\");this.inspectionsStore.getProxy().setUrl(\"/api/vehicle/1/getinspections\");this.add(this.getListPanel())},getListPanel:function(){var a=this;return[{xtype:\"list\",name:\"vehicle-inspections\",disableSelection:true,title:\"Vehicle Inspections\",emptyText:\"No Inspections\",itemTpl:\"{title}\",cls:\"sfa-inspections\",store:this.inspectionsStore,listeners:{itemtap:function(e,c,d,b){a.onSelectInspectionAction(e,c,d,b)}}}]},loadList:function(b,a){this.vehicleId=b.get(\"id\");this.vehicle=b;this.inspectionsStore.getProxy().setUrl(\"/api/vehicle/\"+this.vehicleId+\"/getinspections\");this.inspectionsStore.loadData();this.removeChecklistDetails()},onSelectInspectionAction:function(d,b,c,a){this.loadChecklistDetails(a)},loadChecklistDetails:function(a){if(this.inspectionView){this.inspectionView.destroy()}this.inspectionView",588591,37,"panel.VehicleInspectionDetails\",{title:\"Inspection\"});this.hideButtons();this.push(this.inspectionView);this.inspectionView.loadChecklist(this.vehicle,a)},removeChecklistDetails:function(){var a=this.down(\"SafeStartVehicleInspectionDetails\");if(a){this.remove(a);this.hideButtons()}},changeButtons:function(a){switch(a.xtype){case\"SafeStartVehicleInspectionsPanel\":break;case\"SafeStartVehicleInspectionDetails\":this.down(\"button[name=edit-inspection]\").show(true);this.down(\"button[name=delete-inspection]\").show(true);break}},hideButtons:function(){this.down(\"button[name=edit-inspection]\").hide(true);this.down(\"button[name=delete-inspection]\").hide(true)",594736,35,"MenuVehicle",569040,115,584267,72,579753,203,"currentOdometerKms\",defaultValue:\"unknown",579946,61,"currentOdometerHours\",defaultValue:\"unknown\"",579998,99,",{name:\"checkLis",584111,39,"enabled\",defaultValue:1},{name:\"checkListHash",584448,32,",{name:\"warrantyStartD",569467,42,580099,37,"SafeStartApp.model.User\",associationKey:\"responsibleUsers\",name:\"responsibleUsers\"},{type:\"hasMany\",",588031,32,"associationKey:\"users\",name:\"u",580203,282,"Menu",580485,63,"defaultRootId:0,model:\"SafeStartApp.model.Menu",580574,457,"activate",588495,141,581176,109,"Menu",581285,74,582018,101,"this.disable()}",581373,327,"SafeStartVehicleInspectionsPanel\"},{xtype:\"SafeStartVehicleAlertsPanel",581689,54,",{xtype:\"SafeStartVehicleUsersPanel",587241,37,"Details",581741,812,"User",586333,48,587574,917,"activate",588495,319,582018,101,"this.disable()}",588828,1251,"pages.Alerts",566382,41,"lert",588368,34,"Alerts\",id:\"SafeStartAlertsPageTab\",iconCls:\"favorites",580943,38,"items:[],listeners:{scope:this,activate",588495,141,"Main",573767,54,"}",581327,32,582018,101,"this.disable();return}SafeStartApp.app.getController(\"Company\").updateAlertsBadge()",581470,78,"company-alerts",581562,34,"1,items:[{xtype:\"SafeStartVehicleAlertsPanel\"}]",589611,265,"VehicleAlertsPanel\").loadCompanyList(this.companyId,\"new\"",576192,41,582545,411,584589,534,"activate",588495,141,585268,1014,623100,175,"c,f,d,e,b){var a=this;var g",623300,37,"f=f||{test:1};if(!b){",623351,42,"}",623394,36,"c,params:Ext.encode({meta:g,data:f}),success:function(i){if(!b){Ext.Viewport.setMasked(false)}var h=Ext.decode(i.responseText);if(h.meta&&h.meta.status==200&&!parseInt(h.meta.errorCode)){if(d&&typeof d==\"function\"){d(h",623641,45,"h,e)}},failure:function(h",623711,71,"h.responseText),e",623799,697,"if(SafeStartApp.userModel.getAssociatedData().company){SafeStartApp.companyModel.setData(SafeStartApp.userModel.getAssociatedData().company)}",624496,440,625193,139,"Alert",625322,134,625494,457,"eventPublishers:{touchGesture:{recognizers:{mousewheeldrag:{xclass:\"Ext.ux.event.recognizer.MouseWheelDrag\"}}}",625949,146,596444,54,626082,233]