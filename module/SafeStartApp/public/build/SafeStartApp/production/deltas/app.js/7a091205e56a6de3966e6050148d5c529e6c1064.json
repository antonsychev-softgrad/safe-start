["/*1bd5268371f60e4d594046e95bf0c76f4e471202",42,273779,"util.Geolocation",241523,41,"[\"Ext.util.GeoLocation\"],config:{autoUpdate:true,frequency:10000,latitude:null,longitude:null,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,speed:null,timestamp:null,allowHighAccuracy:false,timeout:Infinity,maximumAge:0,provider:undefined},updateMaximumAge:function(){if(this.watchOperation){this.updateWatchOperation()}},updateTimeout:function(){if(this.watchOperation){this.updateWatchOperation()}},updateAllowHighAccuracy:function(){if(this.watchOperation){this.updateWatchOperation()}},applyProvide",306242,33,"Geolocation){if(!a){if(navigator&&navigator.geolocation){a=navigator.geolocation}else{if(window.google){a=google.gears.factory.create(\"beta.geolocation\")}}}}else{this.fireEvent(\"locationerror\",this,false,false,true,\"This device does not support Geolocation.\")}return a},updateAutoUpdate:function(a,b){var c=this,f=c.getProvider();if(b&&f){clearInterval(c.watchOperationId);c.watchOperationId=null}if(a){if(!f){c.fireEvent(\"locationerror\",c,false,false,true,null);return}try{c.updateWatchOperation()}catch(d){c.fireEvent(\"locationerror\",c,false,false,true,d.message)}}},updateWatchOperation:function(){var a=this,b=a.getProvider();if(a.watchOperationId){clearInterval(a.watchOperationId)}function c(){b.getCurrentPosition(Ext.bind(a.fireUpdate,a),Ext.bind(a.fireError,a),a.parseOptions())}c();a.watchOperationId=setInterval(c,this.getFrequency())},updateLocation:function(h,a,c){var b=this,g=b.getProvider();var f=function(i,e){if(e){b.fireError(e)}else{b.fireEvent(\"locationerror\",b,false,false,true,i)}if(h){h.call(a||b,null,b)}};if(!g){f(null);return}try{g.getCurrentPosition(function(e){b.fireUpdate(e);if(h){h.call(a||b,b,b)}},function(e){f(null,e)},c||b.parseOptions())}catch(d){f(d.message)}},fireUpdate:function(a){var b=this,c=a.coords;this.position=a;b.setConfig({timestamp:a.timestamp,latitude:c.latitude,longitude:c.longitude,accuracy:c.accuracy,altitude:c.altitude,altitudeAccuracy:c.altitudeAccuracy,heading:c.heading,speed:c.speed});b.fireEvent(\"locationupdate\",b)},fireError:function(a){var b=a.code;this.fireEvent(\"locationerror\",this,b==a.TIMEOUT,b==a.PERMISSION_DENIED,b==a.POSITION_UNAVAILABLE,a.message==undefined?null:a.message)},parseOptions:function(){var b=this.getTimeout(),a={maximumAge:this.getMaximumAge(),enableHighAccuracy:this.getAllowHighAccuracy()};if(b!==Infinity){a.timeout=b}return a},destroy:function(){this.setAutoUpdate(false)}});Ext.define(\"Ext.Map\",{extend:Ext.Container,xtype:\"map\",isMap",259835,41,"map\",useCurrentLocation:false,map:null,geo:null,mapOptions:{}",240223,52,"if(!(window.google||{}).maps){this.setHtml(\"Google Maps API is required\")}",531296,47,"on({painted:\"doResize\",scope:this});this.innerElement.on(\"touchstart\",\"onTouchStart\",this",431821,49,289739,55,247970,33,",children:[{reference:\"mapContainer\",className:Ext.baseCSSPrefix+\"map-container\"}]}]}},onTouchStart:function(a){a.makeUnpreventable()},applyMapOptions:function(a){return Ext.merge({},this.options,a)},updateMapOptions:function(d){var a=this,c=(window.google||{}).maps,b=this.getMap();if(c&&b){b.setOptions(d)}if(d.center&&!a.isPainted()){a.un(\"painted\",\"doMapCenter\",this);a.on(\"painted\",\"doMapCenter\",this,{delay:150,single:true})}},doMapCenter:function(){this.setMapCenter(this.getMapOptions().center)},getMapOptions:function(){return Ext.merge({},this.options||this.getInitialConfig(\"mapOptions\"))},updateUseCurrentLocation:function(a){this.setGeo(a);if(!a){this.setMapCenter()}},applyGeo",250272,34,"Ext.util.Geolocation,this.getGeo())},updateGeo:function(b,a){var c={locationupdate:\"onGeoUpdate\",locationerror:\"onGeoError\",scope:this};if(a){a.un(c)}if(b){b.on(c);b.updateLocation()}},doResize:function(){var b=(window.google||{}).maps,a=this.getMap();if(b&&a){b.event.trigger(a,\"resize\")}},renderMap:function(){var d=this,f=(window.google||{}).maps,b=d.mapContainer,a=d.getMapOptions(),e=d.getMap(),c;if(f){if(Ext.os.is.iPad){Ext.merge({navigationControlOptions:{style:f.NavigationControlStyle.ZOOM_PAN}},a)}a.zoom=a.zoom||12;a.mapTypeId=a.mapTypeId||f.MapTypeId.ROADMAP;if(!a.hasOwnProperty(\"center\")){a.center=new f.LatLng(37.381592,-122.135672)}if(a.center&&a.center.latitude&&!Ext.isFunction(a.center.lat)){a.center=new f.LatLng(a.center.latitude,a.center.longitude)}if(b.dom.firstChild){Ext.fly(b.dom.firstChild).destroy()}if(e){f.event.clearInstanceListeners(e)}d.setMap(new f.Map(b.dom,a));e=d.getMap();c=f.event;c.addListener(e,\"zoom_changed\",Ext.bind(d.onZoomChange,d));c.addListener(e,\"maptypeid_changed\",Ext.bind(d.onTypeChange,d));c.addListener(e,\"center_changed\",Ext.bind(d.onCenterChange,d));c.addListenerOnce(e,\"tilesloaded\",Ext.bind(d.onTilesLoaded,d))}},onTilesLoaded:function(){this.fireEvent(\"maprender\",this,this.map)},onGeoUpdate:function(a){if(a){this.setMapCenter(new google.maps.LatLng(a.getLatitude(),a.getLongitude()))}},onGeoError:Ext.emptyFn,setMapCenter:function(d){var a=this,c=a.getMap(),b=(window.google||{}).maps;if(b){if(!a.isPainted()){a.un(\"painted\",\"doMapCenter\",this);a.on(\"painted\",\"doMapCenter\",this,{delay:150,single:true});return}d=d||new b.LatLng(37.381592,-122.135672);if(d&&!(d instanceof b.LatLng)&&\"longitude\" in d){d=new b.LatLng(d.latitude,d.longitude)}if(!c){a.renderMap();c=a.getMap()}if(c&&d instanceof b.LatLng){c.panTo(d)}else{this.options=Ext.apply(this.getMapOptions(),{center:d})}}},onZoom",183417,32,"MapOptions(),c=this.getMap(),b;b=(c&&c.getZoom)?c.getZoom():a.zoom||10;this.options=Ext.apply(a,{zoom:b});this.fireEvent(\"zoomchange\",this,c,b)},onType",563239,32,"MapOptions(),c=this.getMap(),a;a=(c&&c.getMapTypeId)?c.getMapTypeId():b.mapTypeId;this.options=Ext.apply(b,{mapTypeId:a});this.fireEvent(\"typechange\",this,c,a)},onCenter",563239,32,"MapOptions(),c=this.getMap(),a;a=(c&&c.getCenter)?c.getCenter():b.center;this.options=Ext.apply(b,{center:a});this.fireEvent(\"centerchange\",this,c,a",434605,42,"Geo());var a=this.getMap();if(a&&(window.google||{}).maps){google.maps.event.clearInstanceListeners(a",433088,52,273821,40304,"carousel.Item\",{extend:Ext.Decorator,config:{baseCls:\"x-carousel-item\",component:null,translatable:true}});Ext.define(\"Ext.carousel.Indicato",433162,32,"carouselindicator\",alternateClassName:\"Ext.Carousel.Indicator",452719,37,"carousel-indicator\",direction:\"horizonta",555792,49,"indicators=[];this.element.on({tap:\"onTap\",scope:this})}",431727,79,"c,a,b);if(a===\"horizontal\"){this.setBottom(0);this.setRight(null)}else{this.setRight(0);this.setBottom(null)}},addIndicator:function(){this.indicators.push(this.element.createChild({tag:\"span\"}))},removeIndicator:function(){var a=this.indicators;if(a.length>0){a.pop().destroy()}},setActiveIndex:function(b){var e=this.indicators,d=this.activeIndex,a=e[d],f=e[b],c=this.getBaseCls();if(a){a.removeCls(c,null,\"active\")}if(f){f.addCls(c,null,\"active\")}this.activeIndex=b;return this},onTap:function(f){var g=f.touch,a=this.element.getPageBox(),d=a.left+(a.width/2),b=a.top+(a.height/2),c=this.getDirection();if((c===\"horizontal\"&&g.pageX>=d)||(c===\"vertical\"&&g.pageY>=b)){this.fireEvent(\"next\",this)}else{this.fireEvent(\"previou",480956,34,"d=this.indicators,b,c,a;for(b=0,c=d.length;b<c;b++){a=d[b];a.destroy()}d.length=0",278830,38,"util.TranslatableGroup",151614,32,"Abstract,config:{items:[],activeIndex:0,itemLength:{x:0,y:0}},applyItems:function(a){return Ext.Array.from(a)},doTranslate:function(n,m){var l=this.getItems(),p=this.getActiveIndex(),j=this.getItemLength(),d=j.x,c=j.y,h=typeof n==\"number\",g=typeof m==\"number\",e,f,k,o,b,a;for(f=0,k=l.length;f<k;f++){o=l[f];if(o){e=(f-p);if(h){b=n+e*d}if(g){a=m+e*c}o.translate(b,a)}}}});Ext.define(\"Ext.carousel.Carous",259753,50,"Carousel\",xtype:\"carousel\",config:{baseCls:\"x-carousel\",direction:\"horizontal\",directionLock:false,animation:{duration:250,easing:{type:\"ease-out\"}},indicator:true,ui:\"dark\",itemConfig:{},bufferSize:1,itemLength:null},itemLength:0,offset:0,flickStartOffset:0,flickStartTime:0,dragDirection:0,count:0,painted:false,activeIndex:-1,before",336107,39,525487,99,"SizeChange\",this);this.carouselItems=[];this.orderedCarouselItems=[];this.inactiveCarouselItems=[];this.hiddenTranslation=0},updateBufferSize:function(n){var l=Ext.carousel.Item,h=n*2+1,m=this.isRendered(),c=this.innerElement,g=this.carouselItems,f=g.length,e=this.getItemConfig(),d=this.getItemLength(),j=this.getDirection(),b=j===\"horizontal\"?\"setWidth\":\"setHeight\",a,k;for(a=f;a<h;a++){k=Ext.factory(e,l);if(d){k[b].call(k,d)}k.setLayoutSizeFlags(this.LAYOUT_BOTH);g.push(k);c.append(k.renderElement);if(m&&k.setRendered(true)){k.fireEvent(\"renderedchange\",this,k,true)}}this.getTranslatable().setActiveIndex(n)},setRendered:function(g){var a=this.rendered;if(g!==a){this.rendered=g;var b=this.items.items,d=this.carouselItems,c,f,e;for(c=0,f=b.length;c<f;c++){e=b[c];if(!e.isInnerItem()){e.setRendered(g)}}for(c=0,f=d.length;c<f;c++){d[c].setRendered(g)}return true}return false},onSizeChange:function(){this.refreshSizing();this.refreshCarouselItems();this.refreshActiveItem()},onItemAdd:function(c,",295433,34,"d=this.getInnerItems().indexOf(c),a=this.getIndicator();if(a&&c.isInnerItem()){a.addIndicator()}if(d<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(d)&&!this.isItemsInitializing){this.refreshActiveItem()}},doItemLayoutAdd:function(a){if(a.isInnerItem()",513964,35,"},onItemRemove:function(f,",295433,34,"h=this.getInnerItems().indexOf(f),a=this.getIndicator(),d=this.carouselItems,c,e,g;if(f.isInnerItem()&&a){a.removeIndicator()}if(h<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(h)){for(c=0,e=d.length;c<e;c++){g=d[c];if(g.getComponent()===f){g.setComponent(null)}}this.refreshActiveItem()}},doItemLayoutRemove:function(a){if(a.isInnerItem()",513964,35,"},onInnerItemMove:function(b,c,a){if((this.isIndexDirty(c)||this.isIndexDirty(a))){this.refreshActiveItem()}},doItemLayoutMove:function(a){if(a.isInnerItem()",513964,35,"},isIndexDirty:function(b){var a=this.getActiveIndex(),c=this.getBufferSize();return(b>=a-c&&b<=a+c)},getTranslatable",153919,39,153582,49,"Group;a.setItems(this.orderedCarouselItems);a.on(\"animationend\",\"onAnimationEnd\",this)}return a},onDragStart:function(f){var d=this.getDirection(),b=f.absDeltaX,a=f.absDeltaY,c=this.getDirectionLock();this.isDragging=true;if(c){if((d===\"horizontal\"&&b>a)||(d===\"vertical\"&&a>b)){f",227764,54,229667,38,";this.dragStartOffset=this.offset;this.dragDirection=0},onDrag:function(j",228477,34,"k=this.dragStartOffset,l=this.getDirection(),m=l===\"horizontal\"?j.deltaX:j.deltaY,a=this.offset,i=this.flickStartTime,c=this.dragDirection,b=Ext.Date.now(),h=this.getActiveIndex(),f=this.getMaxItemIndex(),d=c,g;if((h===0&&m>0)||(h===f&&m<0)){m*=0.5}g=k+m;if(g>a){c=1}else{if(g<a){c=-1}}if(c!==d||(b-i)>300){this.flickStartOffset=a;this.flickStartTime=b}this.dragDirection=c;this.setOffset(g)},onDragEnd:function(j",157113,42,"j);this.isDragging=false;var a=Ext.Date.now(),i=this.itemLength,g=i/2,f=this.offset,m=this.getActiveIndex(),c=this.getMaxItemIndex(),h=0,l=f-this.flickStartOffset,b=a-this.flickStartTime,k=this.getIndicator(),d;if(b>0&&Math.abs(l)>=10){d=l/b;if(Math.abs(d)>=1){if(d<0&&m<c){h=-1}else{if(d>0&&m>0){h=1}}}}if(h===0){if(m<c&&f<-g){h=-1}else{if(m>0&&f>g){h=1}}}if(k){k.setActiveIndex(m-h)}this.animationDirection=h;this.setOffsetAnimated(h*i)},applyAnimation:function(a){a.easing=Ext.factory(a.easing,Ext.fx.easing.EaseOut);",224019,49,"getIndicator();this.currentAxis=(b===\"horizontal\")?\"x\":\"y\";if(a){a.setDirection(b)}},setOffset:function(a){this.offset=a",223773,33,"Axis(this.currentAxis,a+this.itemOffset);return this},setOffsetAnimated:function(b){var a=this.getIndicator();if(a){a.setActiveIndex(this.getActiveIndex()-this.animationDirection)}this.offset=b",223773,33,"Axis(this.currentAxis,b+this.itemOffset,this.getAnimation());return this},onAnimationEnd:function(b){var c=this.getActiveIndex(),a=this.animationDirection,e=this.currentAxis,f=b[e],d=this.itemLength,g;if(a===-1){g=d+f}else{if(a===1){g=f-d}else{g=f}}g-=this.itemOffset;this.offset=g;this.setActiveItem(c-a",157784,34,"Sizing();this.refreshActiveItem()},refreshSizing:function(){var a=this.element,b=this.getItemLength(),e={x:0,y:0},c,d;if",190848,35,"){d=a.getWidth()}else{d=a.getHeight()}this.hiddenTranslation=-d;if(b===null){b=d;c=0}else{c=(d-b)/2}this.itemLength=b;this.itemOffset=c;e[this.currentAxis]=b;this.getTranslatable().setItemLength(e)},refreshOffset:function(){this.setOffset(this.offset)},refreshActiveItem:function(){this.doSetActiveItem(this.getActiveItem())},getActiveIndex:function(){return this.activeIndex},refreshActiveIndex:function(){this.activeIndex=this.getInnerItemIndex(this.getActiveItem())},refreshCarouselItems:function(){var a=this.carouselItems,",178684,41,"c.getTranslatable().refresh()}this.refreshInactiveCarouselItems()},refreshInactiveCarouselItems:function(){var a=this.inactiveCarouselItems,f=this.hiddenTranslation,c=this.currentAxis,b,e,d;for(b=0,e=a.length;b<e;b++){d=a[b];d.translateAxis(c,f)}},getMaxItemIndex",254813,34,".length-1},getInnerItemIndex",252512,46,"},getInnerItem",252238,42,"applyActiveItem:function(){var b=this.callParent(arguments),a;if(b){a=this.getInnerItemIndex(b);if(a!==-1){this.activeIndex=a;return b}}},doSetActiveItem:function(g){var q=this.getActiveIndex(),e=this.getMaxItemIndex(),m=this.getIndicator(),c=this.getBufferSize(),k=this.carouselItems.slice(),n=this.orderedCarouselItems,p={},o={},a,l,b,f,h,j,d;if(k.length===0",513964,36,"n.length=0;if(g){b=g.getId();o[b]=g;p[b]=c;if(q>0){for(f=1;f<=c;f++){h=q-f;if(h>=0){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c-f}else{break}}}if(q<e){for(f=1;f<=c;f++){h=q+f;if(h<=e){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c+f}else{break}}}for(f=0,j=k.length;f<j;f++){d=k[f];l=d.getComponent();if(l){b=l.getId();if(p.hasOwnProperty(b)){k.splice(f,1);f--;j--;delete o[b];n[p[b]]=d}}}for(b in o){if(o.hasOwnProperty(b)){a=o[b];d=k.pop();d.setComponent(a);n[p[b]]=d}}}this.inactiveCarouselItems.length=0;this.inactiveCarouselItems=k;this.refreshOffset();this.refreshInactiveCarouselItems();if(m){m.setActiveIndex(q)}},next:function(){this.setOffset(0);if(this.activeIndex===this.getMaxItemIndex()){return this}this.animationDirection=-1;this.setOffsetAnimated(-this.itemLength);return this},previous:function(){this.setOffset(0);if(this.activeIndex===0){return this}this.animationDirection=1;this.setOffsetAnimated(this.itemLength);return this},applyIndicator",220015,40,"carousel.Indicator",281968,33,"if(a){this.insertFirst(a);a.setUi(this.getUi());a.on({next:\"next\",previous:\"previous\",scope:this})}",157984,32,"carouselItems.slice();this.carouselItems.length=0;Ext.destroy(a,this.getIndicator(),this.translatable);this.callParent();delete this.carouselItems",306111,33,314125,239741,"navigation.Bar\",{extend:Ext.TitleBar",300702,141,"layout:{type:\"hbox\"},defaultBackButtonText:\"Back\",animation:{duration:300},useTitleForBackButtonText:null,view:null,android2Transforms:false,backButton:{align:\"left\",ui:\"back\",hidden:true}},platformConfig:[{platform:[\"blackberry\"],animation:false}]",296672,36,"!a.items){a.items=[]}this.backButtonStack=[];this.activeAnimations=[];this.callParent([a]",456118,86,"updateBackButton:function(a,b){if(b){this.remove(b)}if(a){this.add(a);a.on({scope:this,tap:this.onBackButtonTap})}},onBack",510270,37,"back\",this)},updateView:function(b){var d=this,j=d.getBackButton(),a,c,f,g,e,h;d.getItems();if(b){a=b.getInnerItems();for(c=0;c<a.length;c++){g=a[c];e=(g.getTitle)?g.getTitle():g.config.title;d.backButtonStack.push(e||\"&nbsp;\")}h=d.getTitleText();if(h===undefined){h=\"\"}d.setTitle(h);f=d.getBackButtonText();if(f){j.setText(f);j.show()}}},onViewAdd:function(c,e){var d=this,b=d.backButtonStack,a,f;d.endAnimation();f=(e.getTitle)?e.getTitle():e.config.title;b.push(f||\"&nbsp;\");a=b.length>1;d.doChangeView(c,a,false)},onViewRemove:function(c){var d=this,b=d.backButtonStack,a;d.endAnimation();b.pop();a=b.length>1;d.doChangeView(c,a,true)},doChangeView:function(k,c,g){var r=this,o=r.leftBox,e=o.element,f=r.titleComponent,m=f.element,n=r.getBackButton(),l=r.getTitleText(),h=r.getBackButtonText(),q=r.getAnimation()&&k.getLayout().getAnimation(),p=q&&q.isAnimation&&k.isPainted(),d,i,a,j,b;if(p){i=r.createProxy(o.element);e.setStyle(\"opacity\",\"0\");n.setText(h);n[c?\"show\":\"hide\"]();a=r.createProxy(f.element.getParent());m.setStyle(\"opacity\",\"0\");r.setTitle(l);d=r.measureView(i,a,g);j=d.left;b=d.title;r.isAnimating=true;r.animate(e,j.element);r.animate(m,b.element,function(){m.setLeft(d.titleLeft);r.isAnimating=false;r.refreshTitlePosition()})",515310,32,"&&!this.getAndroid2Transforms()){i.ghost.destroy();a.ghost.destroy()}else{r.animate(i.ghost,j.ghost);r.animate(a.ghost,b.ghost,function(){i.ghost.destroy();a.ghost.destroy()})}}else{if(c){n.setText(h);n.show()}else{n.hide()}r.setTitle(l)}},measureView:function(e,u,k){var w=this,j=w.element,v=w.leftBox.element,p=w.titleComponent.element,l=Math.min(j.getWidth()/3,200),q=v.getWidth(),c=j.getX(),m=j.getWidth(),n=p.getX(),d=p.getLeft(),s=p.getWidth(),r=e.x,t=e.width,a=e.left,h=Ext.browser.is.AndroidStock2&&!this.getAndroid2Transforms(),i,b,f,x,o,g;g=c-r-t;if(k){i=g;b=Math.min(n-t,l)}else{b=g;i=Math.min(n-c,l)}if(h){f={element:{from:{left:i,opacity:1},to:{left:0,opacity:1}}}}else{f={element:{from:{transform:{translateX:i},opacity:0},to:{transform:{translateX:0},opacity:1}},ghost:{to:{transform:{translateX:b},opacity:0}}}}g=c-n+q;if((a+s)>n){o=c-n-s}if(k){p.setLeft(0);b=c+m-n-s;if(o!==undefined){i=o}else{i=g}}else{i=c+m-n-s;if(o!==undefined){b=o}else{b=g}i=Math.max(d,i)}if(h){x={element:{from:{left:i,opacity:1},to:{left:d,opacity:1}}}}else{x={element:{from:{transform:{translateX:i},opacity:0},to:{transform:{translateX:d},opacity:1}},ghost:{to:{transform:{translateX:b},opacity:0}}}}return{left:f,title:x,titleLeft:d}},animate:function(b,a,e){var c=this,d;b.setLeft(0);a=Ext.apply(a,{element:b,easing:\"ease-in-out\",duration:c.getAnimation().duration||250,preserveEndState:true});d=new Ext.fx.Animation(a);d",255623,33,"e){e.call(c)}},c);Ext.Animator.run(d);c.activeAnimations.push(d)},endAnimation:function(){var a=this.activeAnimations,d,b,c;if(a){c=a.length",544050,32,"Animating){d.stopAnimation()}else{d.destroy()}}this.activeAnimations=[]}",302292,37,"!this.isAnimating){this.callParent()}},getBackButtonText:function(){var b=this.backButtonStack[this.backButtonStack.length-2],a=this.getUseTitleForBackButtonText();if(!a){if(b){b=this.getDefaultBackButtonText()}}return b},getTitleText:function(){return this.backButtonStack[this.backButtonStack.length-1]},beforePop:function(b){b--;for(var a=0;a<b;a++){this.backButtonStack.pop()}},doSetHidden:function(a){if(!a){this.element.setStyle({position:\"relative\",top:\"auto\",left:\"auto\",width:\"auto\"})}else{this.element.setStyle({position:\"absolute\",top:\"-1000px\",left:\"-1000px\",width:this.element.getWidth()+\"px\"})}},createProxy:function(b){var e,a,f,d,c;e=b.dom.cloneNode(true);e.id=b.id+\"-proxy\";b.getParent().dom.appendChild(e);e=Ext.get(e);a=b.getX();f=b.getY();d=b.getLeft();c=b.getWidth();e.setStyle(\"position\",\"absolute\");e.setX(a);e.setY(f);e.setHeight(b.getHeight());e.setWidth(c);return{x:a,y:f,left:d,width:c,ghost:e}}});Ext.define(\"Ext.navigation.",339423,52,"NavigationView\",xtype:\"navigationview",452719,38,"avigationview\",navigationBar:{docked:\"top\"},defaultBackButtonText:\"Back\",useTitleForBackButtonText:false",453037,32,"duration:300,easing:\"ease-out\",type:\"slide\",direction:\"left\"}",515181,43,"NavigationBar();a.on({back:b.onBackButtonTap,scope:b});b.relayEvents(a,\"rightbuttontap\");b.relayEvents(b,{add:\"push\",remove:\"pop\"})},applyLayout:function(a){a=a||{};return a},onBackButtonTap:function(){this.pop();this.fireEvent(\"back\",this)},push:function(a){return this.add(a)},pop:function(a){if(this.beforePop(a)){return this.doPop()}},beforePop:function(f){var e=this,g=e.getInnerItems();",246163,37,"var d=g.length-1,a;for(a=d;a>=0;a--){if((Ext.isString(f)&&Ext.ComponentQuery.is(g[a],f))||(Ext.isObject(f)&&f==g[a])){f=d-a;break}}if(!Ext.isNumber(f)){return false}}var c=g.length,b;if(!Ext.isNumber(f)||f<1){f=1}f=Math.min(f,c-1);if(f){e.getNavigationBar().beforePop(f);b=g.splice(-f,f-1);for(a=0;a<b.length;a++){this.remove(b[a])}return true}return false},doPop:function(){var a=this,b=this.getInnerItems();a.remove(b[b.length-1]);return this.getActiveItem()},getPreviousItem:function(){var a=this.getInnerItems();return a[a.length-2]},updateUseTitleForBackButtonText:function(b){var a=this.getNavigationBar();if(a){a.setUseTitleForBackButtonText(b)}},updateDefaultBackButtonText:function(b){var a=this.getNavigationBar();if(a){a.setDefaultBackButtonText(b)}},applyNavigationBar:function(a){if(!a){a={hidden:true,docked:\"top\"}}if(a.title){delete a.title}a.view=this;a.useTitleForBackButtonText=this.getUseTitleForBackButtonText();return Ext.factory(a,Ext.navigation.Bar,this.getNavigationBar())},updateNavigationBar:function(a,b){if(b){this.remove(b,true)}if(a){this.add(a)}",254983,36,"b=this,c=b.getInnerItems();b.getItems();if(!b.initialized){d=c.length-1}return this.callParent([d,a])},doResetActiveItem:function(d){var a=this,c=a.getInnerItems(),b=a.getLayout().getAnimation();if(d>0){if(b&&b.isAnimation){b.setReverse(true)}a.setActiveItem(d-1);a.getNavigationBar().onViewRemove(a,c[d],d)}},doRemov",192541,35,".getAnimation();if(a&&a.isAnimation){a.setReverse",442938,36,253827,53,"!this.isItemsInitializing&&b.isInnerItem()){this.setActiveItem(b);this.getNavigationBar().onViewAdd(this,b,a",167062,39,"add\",this,b,a)}},reset:function(){return this.pop(this.getInnerItems().length",553845,18770,"associations:[{type:\"hasOne\",",615173,35,"name:\"company",572611,162,",getFullName:function(){return this.get(\"firstName\")+\" \"+this.get(\"lastName\")",619712,34,572806,831,644365,516,618352,36,"Auth",639824,40,573687,85,573789,1238,"Ext.ux.event.recognizer.MouseWheelDrag",492046,37,493350,48,513024,52,"onMouseWheel=Ext.Function.bind(this.onMouseWheel,this);this.fireDragEnd=Ext.Function.bind(this.fireDragEnd,this);if(document.hasOwnProperty(\"onmousewheel\")){document.addEventListener(\"mousewheel\",this.onMouseWheel,true)}else{document.addEventListener(\"wheel\",this.onMouseWheel,true)}},onMouseWheel:function(h){var a=Ext.event.publisher.Dom.prototype,i=a.getElementTarget(h.target),g=a.getBubblingTargets(i),d=h.hasOwnProperty(\"wheelDeltaX\")?h.wheelDeltaX:h.wheelDelta,c=h.hasOwnProperty(\"wheelDeltaY\")?h.wheelDeltaY:h.wheelDelta,f=[{targets:g}],j,b;if(h.deltaX){d=h.deltaX*-50}if(h.deltaY){c=h.deltaY*-50}h=new Ext.event.Dom(h);b=h.time;this.lastEvent=h;this.lastTouches=f;if(!this.startPoint){this.startTime=b;this.startPoint=j={x:h.pageX,y:h.pageY};this.previousPoint=j;this.previousTime=b;this.lastPoint=j;this.lastTime=b;this.fire(\"dragstart\",h,f,this.getInfo(h))}j=this.lastPoint;this.previousTime=this.lastTime;this.previousPoint=j;this.lastPoint={x:j.x+d,y:j.y+c};this.lastTime=b;this.fire(\"drag\",h,f,this.getInfo(h));clearTimeout(this.dragEndTimer);this.dragEndTimer=setTimeout(this.fireDragEnd,50)},fireDragEnd:function(){var a=this.lastEvent;this.fire(\"dragend\",a,this.lastTouches,this.getInfo(a));this.startTime=0;this.previousTime=0;this.lastTime=0",495892,89,";this.lastEvent=null;this.lastTouches=null},getInfo:function(j,i){var a=0.14,d=j.time,b=this.startPoint,f=this.previousPoint,c=this.startTime,m=this.previousTime,n=this.lastPoint,h=(n.x-b.x)*a,g=(n.y-b.y)*a,l=(n.x-f.x)*a,k=(n.y-f.y)*a;n.x+=h;n.y+=g;f.x+=l;f.y+=k;return{flick:{velocity:{x:0,y:0}},touch:i,startX:b.x,startY:b.y,previousX:f.x,previousY:f.y,pageX:n.x,pageY:n.y,deltaX:h,deltaY:g,absDeltaX:Math.abs(h),absDeltaY:Math.abs(g),previousDeltaX:l,previousDeltaY:k,time:d,startTime:c,previousTime:m,deltaTime:d-c,previousDeltaTime:d-m",598448,36,613991,748,575040,1094,"460:6",573150,70,"370:500",574640,34,573261,138,"UserProfile",573407,117,"UserProfile",573532,49,"UserProfile",576578,2844,"alertsPage:\"SafeStartAlert",579415,2809,"Alert",582199,1902,579952,42,584143,4780,"var a=this;setInterval(function(){a.updateAlertsBadge()},60000)},config:{control:{},refs:{pages:\"SafeStartMainView\",",588950,53,"alertsPage:\"SafeStartAlertsPage",589001,142,",updateAlertsBadge:function(){var a=this;",635948,108,"SafeStartApp.AJAX(\"company/\"+",587103,35,"+\"/get-new-incoming?now=\"+new Date().getTime(),{},function(b){if(SafeStartApp.userModel.get(\"role\")==\"superAdmin\"){a.getPages().getTabBar().getComponent(2).setBadgeText(b.alerts)}else{a.getPages().getTabBar().getComponent(1).setBadgeText(b.alerts)}},function(){},true)",578652,36,589178,231,"additional",614048,65,614175,35,589438,213,",{name:\"alert_descrip",598686,44,"alert_critical\",type:\"int\",defaultValue:1",614464,55,589705,335,"Question",599661,57,"itle\",required:true,name:\"description",590072,809,"checkboxfield\",label:\"Alert critical?\",required:false,name:\"alert_critical\"",590795,34,"description\",required:false,name:\"alert_description",600171,38,590908,923,"alert_description",591764,34,"critical",592095,51,591854,269,"alert_critical",591764,34,"description",592095,141,"alert_critical\"].show();this.getFields()[\"alert_description",592208,122,"alert_critical",591764,34,"description",592095,56,619711,35,592393,74,",",579151,37,"xtype:",593200,35,592510,4636,597167,80,603696,42,"load",597362,355,"override(Ext.data.proxy.Ajax,{",371339,414,"this.lastRequest=",371753,48,621792,34,597744,98,",listeners:{scope:this,beforeload:function(a){if(a.getProxy().lastRequest&&Ext.Ajax.isLoading(a.getProxy().lastRequest)){Ext.Ajax.abort(a.getProxy().lastRequest)}}}}",614812,50,"c,b,d){if(b.getError()&&b.getError().statusText!=\"transaction aborted\"",597915,68,"b",597984,70,"if(b.getResponse()&&b.getResponse().responseText){var a=Ext.decode(b.getResponse().responseText);if(a.meta&&parseInt(a.meta.errorCode)){",642167,32,597917,68,"data.errorMessage)}else",597916,64,"Operation filed\")}",598008,41,598048,48,598095,786,"currentOdometerKms\",defaultValue:\"unknown",598871,61,"currentOdometerHours\",defaultValue:\"unknown\"",598923,61,"enabled\",defaultValue:1},{name:\"warrantyStartD",614425,42,599024,37,"SafeStartApp.model.User\",associationKey:\"responsibleUsers\",name:\"responsibleUsers\"},{type:\"hasMany\",",636992,32,"associationKey:\"users\",name:\"users\"",614464,55,"Vehicle",614526,44,599239,998,"5",600239,67,"fieldset\",title:\"Current odometer:\",items:[{xtype:\"textfield\",disabled:true,name:\"currentOdometerHours\",label:\"Hours\"},{xtype:\"textfield\",disabled:true,name:\"currentOdometerKms\"",600275,850,"showUpd",582254,35,601647,1356,596680,37,"Root()",596476,41,596586,74,596191,32,603132,543,"oToNode",603808,33,"Root());",588574,82,"load",603755,32,601897,54,"NodeById(a));this.getNavMain().goToLeaf",603808,33,"NodeById(a+\"-info\"",603847,1102,604982,1024,"var i=false;Ext.each(g,function(j){if(j",606103,33,"k){if(k.get(\"fieldId\")===j.config.fieldId&&k",606180,43,"k);i=true}})}}",606004,69,",alert:i",606229,56,"b){",626885,105,627002,100,"c){c.up(\"",607934,33,"\").destroy()}}]});",606288,33,"add(a",606368,34,"b){var j=this,k=[],d=",606288,32,",c=this.getChecklistForms(),n=[],h=d.down(\"container[cls=sfa-vehicle-inspection-gps]\"),f=d.down(\"field[name=current-odometer-kms]\").getValue(),p=d.down(\"field[name=current-odometer-hours]\").getValue(),a=\"\",m,e,q=d.inspectionRecord,o=\"\",l=[],r;if(h.down(\"togglefield\").getValue()&&h.gps){m=h.gps;a=m.getLatitude()+\";\"+m.getLongitude()}Ext.each(d",606503,51,"s){e=s.config.alertModel;k.push({fieldId:parseInt(e.get(\"fieldId\")),comment:e.get(\"comment\"),images:e.get(\"photos\")})});Ext.each(c,function(s){l=s.query(\"field\");Ext.each(l,function(t){if(t.isHidden()){return}switch(t.xtype){case\"checkboxfield\":if(t",606780,42,"n.push({id:t",606834,56,"t.isChecked()){n.push({id:t.config.fieldId,value:t",606940,36,"n.push({id:t.config.fieldId,value:t",607011,42,"n.push({id:t.config.fieldId,value:t.getValue()});break}})});r={date:Date.now(),fields:n,alerts:k,odometer:f,odometer_hours:p,gps:a};if(q){o=\"?checklistId=\"+q.get(\"checkListId\")}var i=this.getNavMain();var g=",609319,33,";SafeStartApp.AJAX(\"vehicle/\"+d.vehicleId+\"/completechecklist\"+o,r,function(s){d.clearChecklist();d",606320,43,"destroy();var w=i.getActiveItem();var v=d.vehicleId;var t=i.getStore().getNodeById(v+\"-inspections\");var u=i.getStore().getNodeById(v).indexOf(t);g.inspectionsStore.on({load:function(z,y){var x=z.findRecord(\"hash\",s.checklist);g.loadChecklistDetails(x)},single:true});i.fireEvent(\"itemtap\",i,w,u,null,t",607280,92,576815,64,593978,34,607412,610,607631,48,"Details button[action=print]\":{tap:\"downloadVehicleInspectionDetailsPdf",607628,51,"sPanel\":{editInspection:\"onEditInspectionAction",611391,57,608076,435,"Detail",608511,55,"Details",608492,862,609319,33,".loadList(arguments[4].parentNode",609352,85,"this.getVehicleAlertsPanel().loadL",601416,39,609437,63,"4",609501,165,";case\"check-list\":var a=this.getVehicleInspectionDetailsPanel(",601453,36,"a);a",601405,39,"parentNode,arguments[4].get(\"checkListId\"",609658,1020,",downloadVehicleInspectionDetailsPdf:function(a){window.open(\"/api/checklist/\"+a.config.checkListId+\"/generate-pdf\",\"_blank\")},onEditInspectionAction:function(c,b,d){var a=this",601454,69,610606,33,"getchecklist?checklistId=\"+b,{},function(e",604699,46,"e.checklist,c,d);a.loadAlerts(b)})},loadAlerts",604615,51,"inspection/\"+b+\"/alerts",604684,47,"fillAlertsData(c)})},showUpd",582254,35,601647,699,612042,152,"if(SafeStartApp.companyModel){",602490,47,"}else{",612194,51,"}",602538,1137,"oToNode",603808,33,"Root());",588574,82,"load",603755,32,601897,54,"NodeById(a));this.getNavMain().goToLeaf",603808,33,"NodeById(a+\"-info\"))",604593,356,604982,1024,"var i=false;Ext.each(g,function(j){if(j",606103,33,"k){if(k.get(\"fieldId\")===j.config.fieldId&&k",606180,43,"k);i=true}})}}",606004,69,",alert:i",606229,56,"b){",626885,105,627002,100,"c){c.up(\"",607934,33,"\").destroy()}}]});",606288,33,"add(a",606368,34,"b){var j=this,k=[],d=",606288,32,",c=this.getChecklistForms(),n=[],h=d.down(\"container[cls=sfa-vehicle-inspection-gps]\"),f=d.down(\"field[name=current-odometer-kms]\").getValue(),p=d.down(\"field[name=current-odometer-hours]\").getValue(),a=\"\",m,e,q=d.inspectionRecord,o=\"\",l=[],r;if(h.down(\"togglefield\").getValue()&&h.gps){m=h.gps;a=m.getLatitude()+\";\"+m.getLongitude()}Ext.each(d",606503,51,"s){e=s.config.alertModel;k.push({fieldId:parseInt(e.get(\"fieldId\")),comment:e.get(\"comment\"),images:e.get(\"photos\")})});Ext.each(c,function(s){l=s.query(\"field\");Ext.each(l,function(t){if(t.isHidden()){return}switch(t.xtype){case\"checkboxfield\":if(t",606780,42,"n.push({id:t",606834,56,"t.isChecked()){n.push({id:t.config.fieldId,value:t",606940,36,"n.push({id:t.config.fieldId,value:t",607011,42,"n.push({id:t.config.fieldId,value:t.getValue()});break}})});r={date:Date.now(),fields:n,alerts:k,odometer:f,odometer_hours:p,gps:a};if(q){o=\"?checklistId=\"+q.get(\"checkListId\")}var i=this.getNavMain();var g=",609319,33,";SafeStartApp.AJAX(\"vehicle/\"+d.vehicleId+\"/completechecklist\"+o,r,function(s){d.clearChecklist();d",606320,43,"destroy();var w=i.getActiveItem();var v=d.vehicleId;var t=i.getStore().getNodeById(v+\"-inspections\");var u=i.getStore().getNodeById(v).indexOf(t);g.inspectionsStore.on({load:function(z,y){var x=z.findRecord(\"hash\",s.checklist);g.loadChecklistDetails(x)},single:true});i.fireEvent(\"itemtap\",i,w,u,null,t)})",585837,44,607354,85,610908,64,607502,38,610908,1701,"450",644536,33,612645,227,",{xtype:\"fieldset\",title:\"Change password:\",items:[{xtype:\"textfield\",name:\"new_password\",label:\"New\"},{xtype:\"textfield\",name:\"confirm_password\",label:\"Confirm\"}]",573599,44,612915,686,"Companies",619837,101,613706,279,614739,74,"config:{autoLoad:false,listeners:{scope:this,beforeload:function(a){if(a.getProxy().lastRequest&&Ext.Ajax.isLoading(a.getProxy().lastRequest)){Ext.Ajax.abort(a.getProxy().lastRequest)}}}}",614812,50,"c,b,d){if(b.getError()&&b.getError().statusText!=\"transaction aborted\"",597915,68,"b",597984,70,"if(b.getResponse()&&b.getResponse().responseText){var a=Ext.decode(b.getResponse().responseText);if(a.meta&&(parseInt(a.meta.errorCode)!=0)){",642167,32,597917,68,"data.errorMessage)}else",597916,64,"Operation filed\")}",598008,88,615018,47,598095,49,615113,2921,"!f){return}",618037,311,",filterStoreDataByFiled:function(a,c,b){a.clearFilter(!!c);if(!c){return}a.filter(function(d){return(d.get(b)==c)})",619712,40,618388,366,"Companies",618758,1115,"if(SafeStartApp.userModel.get(\"role\")==\"companyUser\"){",613241,241,"else{",613648,58,619938,251,"return this.toolbarButtons",619712,40,620228,96,635221,36,634624,49,620373,778,";this.getStore().addListener(\"beforeload\",function(){this.goToNode(this.getStore().getRoot()",584158,42,610216,33,"\",{extend:",621167,35,621263,358,"alertD",614176,34,"critical",621754,36,621613,124,"null",621739,215,"}}});Ext.define(\"Ext.ux.Fileup\",{extend:Ext.Button,xtype:\"",622046,3496,"success){c.fireEvent(\"success\",d,this,f)}else{if(d&&d.message){c.fireEvent(\"failure\",d.message,d",625627,63,625689,913,621990,35,"ux.Fileup,alias:\"widget.imageupload\"",625152,276,625505,32,625431,65,",10))!==-1){",625534,60,",10",625594,123,"c",625835,41,625756,80,"c",625835,179,599376,33,626602,282,627170,152,627362,47,"fieldValueExists:function(b){var d,a,c;for(c=0,a=b.length;c<a;c++){d=b[c];switch(d.type){case\"group\":if(this.fieldValueExists(d.items)){return true}break;default:if(Ext.isString(d.fieldValue)&&d.fieldValue.length){return true}break}}return false},clearChecklist:function(){this.inspectionRecord=null",627455,35,627518,42,"a){this.remove(a)},this)},fillAlertsData:function(b){var a=this.getAlertsStore();var c;Ext.each(b,function(d){c=a.findRecord(\"fieldId\",d.field.id);if(c){c.set(\"photos\",d.images);c.set(\"comment\",d.description)}})},loadChecklist:function(a,e,g){var d=this;var f=[],h=[],b=[];this.clearChecklist();this.vehicleId=e||0;this.isNew=!g;this.inspectionRecord=g;a=a||[];var c={painted:function(i){d",605237,38,"this",605276,41,"this.config.checked}};Ext.each(a,function(k,j){var i=this.createForm(k,j);if(k.additional){i",627653,34,"h.push(i",627695,38,"k.groupName,checked:this.isNew?false:this.fieldValueExists(k.fields),checklistGroupId:k.groupId,listeners:this.isNew?{}:c})}else{i.name=\"checklist-card\";f.push(i)}},this);this.add(f);if(b.length){this.add(this.createChoiseAdditionalCard(b))}this.add(h);this.add(this.createReviewCard())},createChoiseAdditionalCard:function(a){return",627855,84,"layout:{type:\"vbox\",align:\"center\"},items:[{xtype:\"fieldset\",maxWidth:900,width:\"100%\",defaults:{labelWidth:\"80%\"},items:a},",628608,37,"\"A",628039,180,"},createReviewCard:function(){return",627855,40,628282,33,"layout:{type:\"vbox\",align:\"center\"}",632991,46,628360,181,"},createForm:function(c,b){var d=[];if(b!==0){d.push({text:\"Prev\",action:\"prev\"})}d.push({text:\"Next\",action:\"next\"});var a=this.createFields(c",628592,53,"c",628646,120,"d",628823,53,"layout:{type:\"vbox\",align:\"center\"},groupId:c.groupId,additional:c.additional,groupName:c",628943,43,"d){var b=[];var c=this.getAlertsStore();var f;var g;var e;var a;Ext.each(d,function(h){f=[];g=null;a=[];e=[];if(h.additional){e=this.createFields(h.items,true)}if(Ext.isArray(h.alerts)&&h.alerts[0]){f=h.alerts[0];g",578160,32,"ChecklistAlert\",{alertMessage:f.alertMessage,critical:f.critical,alertDescription:f.alertDescription,triggerValue:f.triggerValue,fieldId:h.fieldId,photos:[]});c.add(g)}switch(h.type){case\"text\":b.push(this.createTextField(h));break;case\"radio\":b.push(this.createRadioField(h,g,e));break;case\"datePicker\":b",629378,33,"h));break;case\"group\":b.push(this.createGroupField(h));break;case\"checkbox\":b.push(this.createCheckboxField(h,g,e",629520,57,"h.type,\"warn\");break}Ext.each(a,function(i){b.push(i)})},this);return b",629614,73,"maxWidth:900,width:\"100%\",value:a.fieldValu",629685,49,",e,c){var ",629747,36,"if(e&&RegExp(e.get(\"triggerValue\"),\"i\").test(b.fieldValue)){e.set(\"active\",true)}Ext.each(b.options,function(f){var g=b.fieldValue||\"n/a\";",629814,33,"f.value,label:f.label,labelWidth:50",629868,34,"new RegExp(f.value,\"i\").test(g),listeners:{check:function(h){var i=h.getValue();h.up(\"fieldset\").fireEvent(\"checkTriggers\",i)",630210,47,"additional:b.additional,additionalFieldsConfig:c,triggerValue:b.triggerValue,triggerable:true",297899,36,"defaults:{labelAlign:\"right\"},maxWidth:900,width:\"100%\",fieldId:b.fieldId,title:b.fieldName,items:d,alertRecord:e,listeners:{checkTriggers:function(h){var i=this.config.alertRecord,f;if(i){if(RegExp(i.get(\"triggerValue\"),\"i\").test(h)){if(i.get(\"critical\")){Ext.Msg.alert(\"DANGER\",i.get(\"alertMessage\"))}i.set(\"active\",true)}else{i.set(\"active\",false)}}if(this.config.additional){if(!this.hasOwnProperty(\"additionalFields\")){this.additionalFields=[];var g=this.up(\"component\").indexOf(this);Ext.each(c,function(j){g++;j.hidden=true;this.additionalFields.push(this.up(\"component\").insert(g,j))},this)}f=this.additionalFields;if(RegExp(this.config.triggerValue,\"i\").test(h)){Ext.each(f,function(j){j.show(true);j.enable()})}else{Ext.each(f,function(j){j.hide(true);j.disable()})}}},hide:function(f){if(Ext.isArray(this.additionalFields)){Ext.each(this.additionalFields,function(g){g.hide()})}},show:function(f){if(Ext.isArray(this.additionalFields)){this.fireEvent(\"checkTriggers\",this.down(\"radiofield[checked]\").getValue())}}}",630380,68,"maxWidth:900,width:\"100%",630446,53,"a.fieldValue||Date.now()",630499,34,",c,b){if(c&&RegExp(c.get(\"triggerValue\"),\"i\").test(a.fieldValue)){c.set(\"active\",true)}",630535,38,"900,additional:a.additional,width:\"100%\"",630576,36,"triggerValue:a.triggerValue,fieldId:a.fieldId,alerts:a.alerts,alertRecord:c,checked:a.fieldValue==\"yes\",triggerable:true,listeners:{check:function(d){this.fireEvent(\"checkTriggers\",\"Yes\")},uncheck:function(d){this.fireEvent(\"checkTriggers\",\"No\")},checkTriggers:function(f){var g=this.config.alertRecord,d;if(g){if(RegExp(g.get(\"triggerValue\",\"i\").test(f))){if(g.get(\"critical\")){Ext.Msg.alert(\"DANGER\",g.get(\"alertMessage\"))}g.set(\"active\",true)}else{g.set(\"active\",false)}}if(this.config.additional){if(!this.hasOwnProperty(\"additionalFields\")){this.additionalFields=[];var e=this.up(\"component\").indexOf(this);Ext.each(b,function(h){e++;h.hidden=true;this.additionalFields.push(this.up(\"component\").insert(e,h))},this)}d=this.additionalFields;if(RegExp(this.config.triggerValue,\"i\").test(f)){Ext.each(d,function(h){h.show(true);h.enable()})}else{Ext.each(d,function(h){h.hide(true);h.disable()})}}}}",630629,56,"maxWidth:900,width:\"100%",630683,171,630869,58,"dditionalFields(",630906,42,"AdditionalFields:function(){var a=1000,b=0;if(!this.isNew&&this.inspectionRecord){a=this.inspectionRecord.get(\"odometerKms\");b=this.inspectionRecord.get(\"odometerHours\")}return[{xtype:\"container\",width:\"100%\",cls:\"sfa-vehicle-inspection-gps\",maxWidth:900,items:[{xtype:\"togglefield\",label:\"GPS\",labelWidth:50,listeners:{change:function(h,f,d,g,e){var c=h.up(\"container[cls=sfa-vehicle-inspection-gps]\");if(g){if(!c.gps){c.gps=Ext.create(\"Ext.util.Geolocation\")}}}}}]},{xtype:\"container\",name:\"vehicle-inspection-additional-fields\",width:\"100%\",maxWidth:900,height:\"auto\"",644536,33,"Current odometer\",layout:{type:\"vbox\"},width:\"100%\",items:[{xtype:\"spinnerfield\",name:\"current-odometer-kms\",label:\"Kilometers\",stepValue:1000,required:true,value:a,minValue:1000},{xtype:\"spinnerfield\",name:\"current-odometer-hours\",label:\"Hours\",stepValue:24,value:b,minValue:0}]}]}]",630940,129,"ontainer\",html:c.groupName,cls:c.alert?\"checklist-details-alerts\":\"checklist-details-ok\"})});return{xtype:\"fieldset\",width:\"100%\",maxWidth:900",631207,120,"panel\",width:\"100%\",maxWidth:900",631337,70,"xtype:\"container\",cls:\"checklist-alert-description\",html:c.get(\"alertDescription\")",631538,73,631628,81,"c)]})},this);return a",631750,34,"b){var a=[];Ext.each(b.get(\"photos\"),function(c){a.push",632163,62,"c+\"/70x70\"})});",631786,44,"width:\"100%\",maxWidth:900",631829,69,"imag",631901,150,"d,e){var c=d",632123,35,"c",632159,66,"e.hash+\"/70x70\"});var f=b.get(\"photos\");f.push(e.hash)}}}]}].concat(a)",598448,36,"Alert",613998,115,614175,36,"lert_",614175,35,"thumbnail\",type:\"string\"},{name:\"image",621709,39,"status\",type:\"string\",defaultValue:\"new",599020,41,"SafeStartApp.model.Comment\",name:\"comments\"},{type:\"hasOne\",",636992,32,"name:\"user\"},{type:\"hasOne\",",634356,35,"name:\"vehicle",575008,32,"store.",621835,83,"Alert",598270,48,"alerts",639648,53,634491,102,"panel.VehicleAler",538387,39,"SafeStartVehicleAlertPanel\",xtype:\"SafeStartVehicleAlertPanel\",requires:[],record:false,config:{title:\"Alert Information\",baseCls:\"x-show-contact\",layout:\"vbox\",scrollable:true",434965,36,"var a=this;this.uniqueId=Ext.id();this.callParent();this.add([{id:\"SafeStartVehicleAlertContent\"+this.uniqueId,tpl:['<div class=\"top\">','<div class=\"name\">{vehicle.title}<span>{vehicle.plantId}</span></div><div class=\"name\">{user.firstName} {user.lastName} at {title}<span>{alert_description}</span><span>{description}</span></div>',\"</div>\"].join(\"\")},{xtype:\"selectfield\",id:\"SafeStartVehicleAlertStatus\"+this.uniqueId,label:\"Status\"",633258,61,"ew\",title:\"New\"},{rank:\"closed\",title:\"Closed\"}]}},",633496,42,591296,94,"VehicleAlertPanel\").updateAction()}}]},{xtype:\"carousel\",direction:\"horizontal\",id:\"SafeStartVehicleAlertImages\"+this.uniqueId,height:400},{id:\"SafeStartVehicleAlertComments\"+this.uniqueId,tpl:['<div class=\"sfa-alert-comments\">',\"<h3>Comments:</h3>\",'<tpl for=\"comments\">','<div class=\"name\">{user.firstName} {user.lastName} at <b>{update_date}</b><br/>',\"<span>{content}</span>\",\"</div>\",\"</tpl>\",\"</div>\"].join(\"\")},{xtype:\"textareafield\",id:\"SafeStartVehicleAlertNewComment\"+this.uniqueId,label:\"New Comment\",maxRows:4},",633496,32,"button\",text:\"Delete\",name:\"delete-data",600479,76,"AlertPanel\").deleteAction(",585277,43,600816,80,"AlertPanel\").updateAction()}}]}])},updateRecord:function(b){if(!b){return}this.record=b;this.down(\"#SafeStartVehicleAlertContent\"+this.uniqueId).setData(b.data);this.setComments(this.record.raw.comments);var a=b.get(\"images\");if(a.length){this.down(\"#SafeStartVehicleAlertImages\"+this.uniqueId).show();Ext.each(a,function(c){this.down(\"#SafeStartVehicleAlertImages\"+this.uniqueId).add({xtype:\"image\",src:\"api/image/\"+c+\"/1024x768\"})},this)}else{this.down(\"#SafeStartVehicleAlertImages\"+this.uniqueId).hide()}this.down(\"#SafeStartVehicleAlertStatus\"+this.uniqueId).setValue(b.get(\"status\"))},updateAction:function(){var b=this;var a={};var c=this.record.getAssociatedData()[\"vehicle\"][\"id\"];a.status=this.down(\"#SafeStartVehicleAlertStatus\"+this.uniqueId).getValue();a.new_comment=this.down(\"#SafeStartVehicleAlertNewComment\"+this.uniqueId).getValue();",610606,33,"alert/\"+this.record.get(\"id\")+\"/update\",a,function(d){b.record.set(\"status\",a.status);if(a.new_comment!=\"\"){b.record.raw.comments.push({user:SafeStartApp.userModel.data,content:a.new_comment,update_date:Ext.Date.format(new Date(),\"d/m/Y H:i\")})}b.setComments(b.record.raw.comments);b.down(\"#SafeStartVehicleAlertNewComment\"+b.uniqueId).setValue(\"\")})},setComments:function(a){if(a.length){this.down(\"#SafeStartVehicleAlertComments\"+this.uniqueId).show();this.down(\"#SafeStartVehicleAlertComments\"+this.uniqueId).setData({comments:a})}else{this.down(\"#SafeStartVehicleAlertComments\"+this.uniqueId).hide()}",581469,106,"aler",587675,34,"vehicle/alert/\"+a.record.get(\"id\")+\"/delete\",{},function(b){a.getParent().pop();a.getParent().alertsStore.loadData()})})",619712,40,632325,33,"navigation.View",632363,44,634624,49,"config:{navigationBar:{ui:\"sencha",638038,71,"name:\"search-alert",619247,46,"a){a.parent.parent.parent.down(\"list[name=vehicle-alerts]\")",620848,45,"a.parent.parent.parent",638202,32,"parent.parent.parent.down(\"list[name=vehicle-alerts]\").getStore(),a,\"alert_title\")}}},{xtype:\"selectfield\",name:\"filter-alert-by-type\",placeHolder:\"Status\"",633258,60,"\",title:\"All\"},{rank:\"new\",title:\"New\"},{rank:\"closed\",title:\"Closed",590394,32,"d,c,a,b){d.parent.parent.parent.filterStoreDataByFiled(d.parent.parent.parent.down(\"list[name=vehicle-alerts]\").getStore(),c,\"status\")}}},{xtype:\"button\",ui:\"action\",name:\"refresh-alerts",619488,44,"parent.parent.parent.down(\"list[name=vehicle-alerts]\").getStore().loadData()}}]},listeners:{push:function(a,b){this.hideFilters()},pop:function(a,b){this.showFilters()}}",531296,47,"alert",618813,38,"Alerts\");this.add(this.getListPanel())},getListPanel",637807,49,"vehicle-alerts\",title:\"Vehicle Alerts\",emptyText:\"No new Alerts\",itemTpl:['<div class=\"headshot\" style=\"background-image:url({thumbnail});\"></div>',\"{alert_description}\",\"<span>{user.firstName} {user.lastName} at {title}</span>\"].join(\"\"),cls:\"sfa-alerts\",store:this.alerts",592945,34,"e,c,d,b){a.onSelectAlertAction(e,c,d,b)}}}},loadList:function(b,a){this.vehicleId=b;this.alerts",604112,48,"vehicleId);this.alertsStore.loadData()},loadCompanyList:function(b,a){this.companyId=b;this.status=a;this.alerts",604112,32,"companyId\",this.companyId);if(this.status){this.alerts",604112,32,"status\",this.status);this.down(\"selectfield[name=filter-alert-by-type]\").hide()}this.alertsStore.loadData()},onSelectAlertAction:function(d,b,c,a){if(this.alertView){this.alertView.destroy()}this.alertView",618671,37,"panel.VehicleAlert\");this.alertView.setRecord(a);this.push(this.alertView)},hideFilters:function(){this.down(\"selectfield[name=filter-alert-by-type]\").hide();this.down(\"searchfield[name=search-alert]\").hide();this.down(\"button[name=refresh-alerts]\").hide()},showFilters:function(){try{this.down(\"list[name=vehicle-alerts]\").deselectAll();if(!this.status){this.down(\"selectfield[name=filter-alert-by-type]\").show()}this.down(\"searchfield[name=search-alert]\").show();this.down(\"button[name=refresh-alerts]\").show()}catch(a){",619711,41,632579,1439,"mod",626611,34,578720,34,"checkListId\",type:\"int\"",614075,38,"creationDate\",type:\"datetime\",mapping:\"creation_date\"},{name:\"data\",type:\"auto\"},{name:\"gps\",type:\"string\"},{name:\"id\",type:\"number\"},{name:\"hash\",type:\"string\"},{name:\"odometerHours\",type:\"integer\",mapping:\"odometer_hours\"},{name:\"odometerKms\",type:\"integer\",mapping:\"odometer_kms\"}],associations:[{type:\"hasOne\",",634356,35,"name:\"vehicle",575008,32,"store.VehicleInspection",621840,78,"VehicleInspection\",proxy:{type:\"ajax",639648,53,634491,102,"panel.VehicleInspectionDetail",632343,51,"InspectionDetails\",requires:[],config:{layout:\"card\",margin:10",635409,39,"spection-details\",cls:\"sfa-vehicle-inspection-details\",scrollable:true,layout:{type:\"vbox\",align:\"center\",pack:\"middle\"}},{xtype:\"panel\",cls:\"sfa-vehicle-inspection-details-map\",layout:\"fit\",items:[{xtype:\"button\",top:20,left:80,text:\"Back\",handler:function(b){var a=b.up(\"SafeStartVehicleInspectionDetails\");a.setActiveItem(0",576586,47,"},loadChecklist:function(c,a){var b",604633,35,"a.get(\"checkListId\")+\"/getchecklistdata\",{},function(d){b.createView(c,d.checklist,a)},true,true)},createView:function(g,f,a){var d=[],b=g.responsibleUsers().first(),h;this.setActiveItem(0);this.down(\"panel[cls=sfa-vehicle-inspection-details]\").removeAll();d.push(this.createContainer(\"Project number\",g.get(\"projectNumber\")),this.createContainer(\"Project name\",g.get(\"projectName\")));if(b){d.push(this.createContainer(\"Operators name\",b.getFullName()))}d.push(this.createContainer(\"Date and Time\",f.creationDate.date));if(f.gpsCoords){h=f.gpsCoords.split(\";\");d.push(this.createMapsContainer(\"Location\",parseFloat(h[0]),parseFloat(h[1])))}this.createGroup(d);this.createGroup([this.createContainer(\"Plant ID\",g.get(\"plantId\")),this.createContainer(\"Registration\",g.get(\"registration\")),this.createContainer(\"Type of vehicle\",g.get(\"type\")),]);var e=g.get(\"serviceDueKm\")+\" km \"+g.get(\"serviceDueHours\")+\" hours\";var c=\"\";if(a.get(\"odometerKms\")){c+=a.get(\"odometerKms\")+\" km\"}if(a.get(\"odometerHours\")){c+=\" \"+a.get(\"odometerHours\")+\" hours\"}this.createGroup([this.createContainer(\"Service due\",e),this.createContainer(\"Current odometer\",c)]);this.createButtons(f.id);this.checkListId=f.id;this.vehicleId=g.get(\"id\");this.inspectionRecord=a;Ext.each(f.fieldsStructure,function(i){this.createFields(i.fields,f.fieldsData,f.alerts,i.groupName,1)},this)},createContainer:function(b,c,d){var a=d?\"sfa-vehicle-details-container-alert\":\"sfa-vehicle-details-container\";return{xtype:\"container\",cls:a,layout:{type:\"hbox\",align:\"left\",pack:\"left\"},width:\"100%\",maxWidth:700,items:[{xtype:\"container\",html:b},{xtype:\"spacer\",flex:1},{xtype:\"container\",html:c}]}},createMapsContainer:function(d,b,c){var a=this;return{xtype:\"container\",cls:\"sfa-vehicle-inspection-details-container2\",layout:{type:\"hbox\",align:\"left\",pack:\"left\"},width:\"100%\",maxWidth:700,items:[{xtype:\"container\",html:d},{xtype:\"spacer\",flex:1},{xtype:\"button\",ui:\"small\",text:\"Open map\",handler:function(g){var f=a.down(\"panel[cls=sfa-vehicle-inspection-details-map]\");var e=new google.maps.LatLng(b,c);var h=f.down(\"map\");if(h){h.marker.setPosition(e);h.getMap().setCenter(e)}else{f.add({xtype:\"map\",mapOptions:{center:e},listeners:{maprender:function(i){i.marker=new google.maps.Marker({position:e,title:\"Vehicle Inspection\",map:i.getMap()})}}})}a.setActiveItem(1)}}]}},createGroup:function(a,d,c){if(d){if(c==1){a.unshift({xtype:\"container\",cls:\"sfa-vehicle-inspection-details-title\",html:d})}else{a.unshift({xtype:\"container\",cls:\"sfa-vehicle-inspection-details-subtitle\",html:d})}}var b={xtype:\"container\",margin:\"0 0 10 0\",layout:{type:\"vbox\",align:\"center\",pack:\"middle\"},width:\"100%\",items:a};if(c>1){return b}this.down(\"panel[cls=sfa-vehicle-inspection-details]\").add(b)},createFields:function(a,c,f,e,d){var b=[];Ext.each(a,function(h){var g=false;switch(h.type){case\"group\":b.push(this.createFields(h.items,c,f,h.fieldName,d+1));break;case\"radio\":case\"text\":case\"checkbox\":Ext.each(f,function(i){if(i.field.id==h.fieldId){g=true}},this);Ext.each(c,function(i){if(i.id==h.fieldId){b.push(this.createContainer(h.fieldName,i.value,g))}},this);break;case\"datePicker\":Ext.each(c,function(j){if(j.id==h.fieldId){if(j.value){var i=new Date(j.value);b.push(this.createContainer(h.fieldName,Ext.Date.format(i,\"Y-m-d\")))}else{b.push(this.createContainer(h.fieldName,\"N/A\"))}}},this);break}},this);if(b.length){return this.createGroup(b,e,d)}},createButtons:function(a){this.down(\"panel[cls=sfa-vehicle-inspection-details]\").add({xtype:\"toolbar\",margin:\"0 0 10 0\",items:[{ui:\"confirm\",action:\"print\",checkListId:a,text:\"Print\"}]})",619712,40,634029,38,"navigation.View",626650,41,"sPanel\"",634623,50,"config:{navigationBar:{items:[{name:\"edit-inspection\",align:\"right\",hidden:true,text:\"Edit\",handler:function(c){var a=c.up(\"",608540,33,");var b=a.down(\"SafeStartVehicleInspectionDetails\");var e=b.checkListId;var d=b.vehicleId;a.removeChecklistDetails();a.fireEvent(\"editInspection\",d,e,b.inspectionRecord)}},{name:\"delete-inspection\",align:\"right\",hidden:true,text:\"Delete\",handler:function(a){console.log(\"Delete inspection handler\")}}]},listeners:{push:function(a,b){this.changeButtons(b)},pop:function(a,b){this.changeButtons(a)},back:function(){this.hideButtons()}}",531296,47,"inspection",618813,38,"VehicleInspections\");this.inspectionsStore.getProxy().setUrl(\"/api/vehicle/1/getinspections\");this.add(this.getListPanel())},getListPanel:function(){var a=this;return[{xtype:\"list\",name:\"vehicle-inspections\",disableSelection:true,title:\"Vehicle Inspections\",emptyText:\"No Inspections\",itemTpl:\"{title}\",cls:\"sfa-inspections\",store:this.inspections",592945,34,"e,c,d,b){a.onSelectInspectionAction(e,c,d,b)}}}]},loadList:function(b,a){this.vehicleId=b.get(\"id\");this.vehicle=b;this.inspectionsStore.getProxy().setUrl(\"/api/vehicle/\"+this.vehicleId+\"/getinspections\");this.inspectionsStore.loadData();this.removeChecklistDetails()},onSelectInspectionAction:function(d,b,c,a){this.loadChecklistDetails(a)},loadChecklistDetails:function(a){if(this.inspectionView){this.inspectionView.destroy()}this.inspectionView",618671,37,"panel.VehicleInspectionDetails\",{title:\"Inspection\"});this.hideButtons();this.push(this.inspectionView);this.inspectionView.loadChecklist(this.vehicle,a)},removeChecklistDetails:function(){var a=this.down(\"SafeStartVehicleInspectionDetails\");if(a){this.remove(a);this.hideButtons()}},changeButtons:function(a){switch(a.xtype){case\"",608540,33,":break;case\"SafeStartVehicleInspectionDetails\":this.down(\"button[name=edit-inspection]\").show(true);this.down(\"button[name=delete-inspection]\").show(true);break}},hideButtons:function(){this.down(\"button[name=edit-inspection]\").hide(true);this.down(\"button[name=delete-inspection]\").hide(true)",578652,35,"MenuVehicle",613998,115,598606,275,"currentOdometerKms\",defaultValue:\"unknown",598871,61,"currentOdometerHours\",defaultValue:\"unknown\"",598923,99,",{name:\"checkList",589328,47,"defaultValue:1},{name:\"checkListHash",621664,40,"warrantyStartD",614425,42,599024,37,"SafeStartApp.model.User\",associationKey:\"responsibleUsers\",name:\"responsibleUsers\"},{type:\"hasMany\",",636992,32,"associationKey:\"users\",name:\"users\"",614464,55,"Vehicle",614526,44,599239,165,"store.MenuVehicl",615120,39,"TreeStore,config:{defaultRootId:0,model:\"SafeStartApp.model.Menu",634382,715,"Menu",635097,74,635948,101,"this.disable()}",635185,488,635503,35,"Details",635671,2108,635948,101,"this.disable()}",637793,1257,"Alert",639823,41,"Alerts",634696,33,"Alerts\",id:\"SafeStartAlertsPageTab\",iconCls:\"favorites",634751,38,637421,180,"Main",618725,54,"}",635139,32,635948,101,"this.disable();return}",633645,39,"\").updateAlertsBadge(",593806,33,638470,46,"company-alerts",635374,34,"1,items:[",635547,37,"]",638576,265,"VehicleAlertsPanel\").loadCompanyList(this.companyId,\"new\")",619712,48,639058,2275,"c,f,d,e,b){var a=this;var g",641358,37,"f=f||{test:1};if(!b){",641409,42,"}",641452,36,"c,params:Ext.encode({meta:g,data:f}),success:function(i){if(!b){Ext.Viewport.setMasked(false)}var h=Ext.decode(i.responseText);if(h.meta&&h.meta.status==200&&!parseInt(h.meta.errorCode)){if(d&&typeof d==\"function\"){d(h",641699,45,"h,e)}},failure",641532,43,641801,39,"h.responseText),e",641857,697,"if(SafeStartApp.userModel.getAssociatedData().company){SafeStartApp.companyModel.setData(SafeStartApp.userModel.getAssociatedData().company)}",642554,440,643251,139,"Alert",643380,591,"eventPublishers:{touchGesture:{recognizers:{mousewheeldrag:{xclass:\"Ext.ux.event.recognizer.MouseWheelDrag\"}}}",643969,146,"company",581088,44,644099,236]