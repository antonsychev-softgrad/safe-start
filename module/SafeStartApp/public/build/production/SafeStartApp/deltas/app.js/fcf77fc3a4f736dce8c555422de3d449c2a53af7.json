["/*24910732ec6920cb759344bc6872f97c05037b7",41,806006,"if(c.config.action",806045,56,806100,11094,817196,192,817390,63,817455,7266,824723,50,824775,52,824829,53,824883,4846,",{name:\"is_",617470,39,829728,364,"is_root",830062,1669,"type==\"radio\"||a.type==\"checkbox\"){",831726,79,";return}}",831872,38,813040,41,"ChecklistFieldForm\"))",831912,266,";if(b.get(\"type\")==\"root\"){a.is_root.setValue(true)}",832178,3007,",{parentId:this.selectedNodeId,vehicleId:this.vehicleId,is_root:this.selectedNodeId===0,type:this.selectedNodeId===0?\"root\":\"text\"});",835333,127,"a.get(\"is_root\"",835524,1133,"if(Ext.isNumeric(b.get(\"id\"))){this.selectedNodeId=b.get(\"id\")}else{this.selectedNodeId=0",836656,1200,859196,179,838069,92,838195,58,"\"",838284,1473,839813,46,839749,469,829808,41,840347,3289,",vehicleForm:{\"save-data\":\"saveAction\",\"reset-data\":\"resetAction\",\"delete-data\":\"delete",843628,203,"Form",843840,54,"SafeStartVehicleForm",843918,972,"Form",844899,2080,"var b=this.getVehicleForm();b",847036,69,"b",847552,34,"show()}b",848320,40,",addAction:function(){var a=this.getVehicleForm();",845534,34,847274,92,"a.setRecord(",847453,36,");a",847552,41,"a",848320,33,"show()},save",835036,32,"VehicleForm();if(this.validateFormByModel(b.getRecord(),b)){var a=this;var c=b",847856,43,"c",911647,46,"}else{c",847953,80,"b.getValues().id+\"/update\",c,function(d){if(d.vehicleId){a._reloadStore(d.vehicleId);b",848146,39,"d",848186,67,"b",847552,34,"show()}b",848320,80,"var b=this.getVehicleForm()",848399,89,"c){if(c",848495,39,"b",820206,38,"d){a",849262,33,"loadData();b.reset();b",847552,41,"b",848320,33,848755,94,"getVehicleForm().reset()",849231,217,"getVehicleForm()",849459,1418,850916,390,"g){var j=this,d",850878,33,",l",851405,37,"kms]\").getValue(),i",851405,57,"a=0,b,p,h,o,c=0,n,m,f,e=d.vehicleRecord,k=24;if(e){b=parseInt(e",851527,33,"p=parseInt(e.get(\"currentOdometerKms\"),10);c=e.get(\"lastInspectionDay\");a=i-b;h=e.get(\"inspectionDueHours\");o=e.get(\"inspectionDueKms\");if(c){k=(new Date().getTime()-c)/60/60/1000;if(k<a){m=",851740,38,"}f=(k/h)}else{f=1}if(f*o<l){m=",851740,38,"}if(l<p||i<b){m=",851740,38,"}}if(m){n",852026,57,"-warn\",message:m",851778,51,"q){j.showConfirmInspectionDialog();n.destroy()}}]});",850879,32,".add(n);return}this.showConfirmInspectionDialog()},showConfirmInspectionDialog:function(){var a",852026,123,"text:\"Confirm\",action:\"c",852173,53,"b){a.destroy()}}]});",850879,32,".add(a",852324,34,"g){var f=[],k",850878,33,",p=this.getChecklistForms(),a=[],b=k",852447,51,"m=k",851407,35,"kms]\").getValue(),i=k",851407,55,"n=\"\",d,j,o=k.inspectionRecord,q=\"\",h=[],c;if(b",852658,33,"b.gps){d=b.gps;n=d.getLatitude()+\";\"+d.getLongitude()}Ext.each(k",852755,51,"r){j=r.config.alertModel;f.push({fieldId:parseInt(j.get(\"fieldId\"),10),comment:j.get(\"comment\"),images:j.get(\"photos\")})});Ext.each(p,function(r){h=r.query(\"field\");Ext.each(h,function(t){var s=\"\";",852991,78,"s=\"Yes\"}else{s=\"No\"}a",853181,33,"s",853136,44,"a",853181,70,"a",853181,47,";break;case\"datepickerfield\":a",853181,33,853362,54,"c={date:Date.now(),fields:a,alerts:f,odometer:m,odometer_hours:i,gps:n};if(o){q=\"?checklistId=\"+o.get(\"checkListId\")}var l=this.getNavMain();var e=",845168,33,";SafeStartApp.AJAX(\"vehicle/\"+k",853627,32,"q,c,function(r){k.clearChecklist();k",853695,57,"s=k.vehicleId;e",853767,36,"v,u){var t=v.findRecord(\"hash\",r.checklist);e.loadChecklistDetails(t)},single:true});l",853889,38,"u,t){l.tapOnActionNode(\"inspections\",s",853965,36,"l",854002,3123,865578,274,857961,1214,"b.getError().statusText));",838302,41,859262,210,838195,58,"\"",838284,59,838344,47,838344,96,856955,32,870510,55,859884,2820,"view.pages.panel.LeftContainer",876232,43,"LeftContainer\",config:{layout:\"card\",name:\"left-container\",maxWidth:300},_menuShown:true,toggleMenu:function(){if(this._menuShown){this.hideMenu()}else{this.showMenu()}},showMenu:function(){this._menuShown=true;this.setWidth();this.setFlex(1);this.setActiveItem(0)},hideMenu:function(){this._menuShown=false;this.setFlex(\"\");this.setWidth(50);this.element.setStyle(\"flex\",\"\");this.setActiveItem(1)",858686,35,862710,1218,"SafeStartLeftContainer\",flex:1,items:[{xtype:\"container\",layout:\"fit\",items:[",863920,76,866094,65,"cls:\"sfa-left-container\",margin:\"0 20 0 0",864117,73,"iconCls:\"add\",cls:\"sfa-add-button",864641,54,",{xtype:\"spacer\",flex:1},{iconCls:\"arrow_left\",height:20,iconMask:true,handler:function(c){var b=this.up(\"SafeStartLeftContainer\");b.toggleMenu",914767,37,"items:[{xtype:\"searchfield\",flex:1",868843,36,914457,37,864282,118,869632,34,864451,118,"]}]},{xtype:\"panel\",cls:\"sfa-left-container\",items:[{xtype:\"toolbar\",items:[{iconCls:\"arrow_right\",height:20,iconMask:true",831641,44,"LeftContainer\");b.toggleMenu()}}]",914892,77,914986,33,864804,204,865578,581,"toolbar:{",866157,73,866255,271,"[name=first-level]",866526,99,"[name=first-level]",866625,408,"j.removeAll()",867032,278,867324,1379,"this.callParent();this.add([{xtype:\"toolbar\",name:\"first-level\",docked:\"top\",ui:\"\",items:[{xtype:\"searchfield\",flex:1",868843,219,869632,223,"])",815439,36,870033,10149,"console.log(h.type",880235,1966,"yearFrom:2000,picker:{",861583,35,894959,36,882236,4414,"Description\",mapping",829628,34,886677,135,"refreshedTimes\",mapping:\"refreshed_times",617024,36,"history",886499,33,"b){if(!(a&&a.length)){return[]}return a}",886803,1062,887876,52,"name:\"alert-content\"",887975,35,"',\"",888010,51,"</b>)</div>\",\"<div>Fault: <b>{alertDescription}</b></div>\",\"",888139,38,"\",\"",888177,32,"at {user.lastName} </div>\",'<tpl for=\"history\">',\"<div>{action} by: {username} at {date} </div>\"",889101,38,"select",889147,32,888314,341,"name:\"alert-history\"",888817,46,"Previous alerts:</h3>\",'<tpl for=\"aler",888896,44,"alert\">Added by {user} at <b>{date} </b><br/>',\"</div></div>\"",889101,38,888662,142,888818,771,"d){if(!d){return}this.record=d;var g={vehicle:d.get(\"vehicle\"),alertDescription:d.get(\"alertDescription\"),description:d.get(\"description\"),user:d.get(\"user\"),creationDate:d.get(\"creationDate\"),history:[]};var c=Ext.Array.from(d.get(\"history\"));var h=false;var j={alerts:[]};var e={};var a;var b=c.length-1;for(b;b>=0;b--){if(c[b].action===\"alert_refreshed\"){h=true;e={user:c[b].user.firstName+\" \"+c[b].user.lastName};a=new Date(c[b].date*1000);e.date=Ext.Date.format(a",886582,53,";j.alerts.push(e)}else{if(!h){e={username:c[b].user.firstName+\" \"+c[b].user.lastName};a=new Date(c[b].date*1000);e.date=Ext.Date.format(a",886582,53,";switch(c[b].action){case\"alert_reopened\":e.action=\"Reopened\";break;case\"alert_closed\":e.action=\"Closed\";break}g.history.push(e)}}}g.history.reverse();this.alertContent=g;this.down(\"container[name=alert-content]\").setData(g);if(j.alerts.length){this.down(\"container[name=alert-history]\").setData(j);this.down(\"container[name=alert-history]\").show()}else{this.down(\"container[name=alert-history]\").hide()}",889708,47,"f=d.get(\"images\");if(f",890832,42,889819,39,"f,function(i",889870,94,"i",889965,155,"d",890121,45,"c=this;var b={};var d=this.record.raw.vehicle.id;var a=",889872,33,890260,34,"var e=\"\";if(this.record.get(\"status\")!=a){switch(a){case\"new\":e=\"Reopened\";break;case\"closed\":e=\"Closed\";break}this.alertContent.history.push({username:SafeStartApp.userModel.getFullName(),action:e,",890610,86,";this.down(\"container[name=alert-content]\").setData(this.alertContent)}b",890219,75,"b",890295,113,"d",890409,43,"b,function(f){c.record.set(\"status\",b.status);if(b.new_comment!=\"\"){c",890521,68,"b",890590,107,"c.setComments(c.record.raw.comments);c",890735,41,"c",890777,55,"&&",889776,43,890874,2182," x-hasbadge\" style=\"position: relative; ",893065,36,"','<tpl if=\"refreshedTimes !== 0\">','<div style=\"position:absolute;\" class=\"x-badge sfa-alert-badge\">{refreshedTimes+1}</div>',\"</tpl>\",\"</div>\"",893108,43,"D",893153,9648,902860,1957,"ie&&",904805,257,"Ext.each(c,function(i){if(i.id==h.fieldId",905246,42,"i.value||\"-\"))}},this",905115,5325,"var b=[]",868702,38,"!=\"companyUser\"){b.push({cls:\"sfa-add-button\",",869926,66,")}this.add({xtype:\"SafeStartLeftContainer\",flex:1,items:[{xtype:\"panel\",cls:\"sfa-left-container\",margin:\"0 20 0 0\",layout:\"fit\"",894829,34,"menu-toggle\",docked:\"top\",items:b.concat({xtype:\"spacer\",flex:1},{iconCls:\"arrow_left\",height:20,iconMask:true,handler:function(d){var c=this.up(\"SafeStartLeftContainer\");c.toggleMenu()}})},{",865959,36,910486,33,"margin:\"0 0 0 0\",store:this.listVehiclesStore}]},{xtype:\"panel\",cls:\"sfa-left-container\",items:[{xtype:\"toolbar\",items:[{iconCls:\"arrow_right\",height:20,iconMask:true,handler:function(){var c=this.up(\"SafeStartLeftContainer\");c.toggleMenu()}}]}]}]",916125,148,914896,34,"xtype:\"panel\",cls:\"sfa-info-container\",name:\"info-container\",scrollable:null,layout:\"card\",flex:2",916469,32,"Form",910878,1373,865578,274,913079,1037,"SafeStartLeftContainer\",flex:1,items:[{xtype:\"container\",layout:\"fit\",items:[",914108,87,866094,65,"margin:\"0 20 0 0\"",864093,37,914329,56,"iconCls:\"add\",cls:\"sfa-add-button",914845,48,",{xtype:\"spacer\",flex:1},{iconCls:\"arrow_left\",height:20,iconMask:true,handler:function(c){var b=this.up(\"SafeStartLeftContainer\");b.toggleMenu",914767,37,868816,52,"flex:1",914445,163,869632,34,869130,66,914725,48,"]}]},{xtype:\"panel\",cls:\"sfa-left-container\",items:[{xtype:\"toolbar\",items:[{iconCls:\"arrow_right\",height:20,iconMask:true",831641,44,"LeftContainer\");b.toggleMenu()}}]",914892,4821,"TabPanel())},getTab",916351,47,918884,39,"defaults:{styleHtmlContent:true},items:[this.getFirstPanel(),{xtype:\"panel\",title:\"Inspection Breakdowns\",name:\"breakdown\",html:\"Inspection Breakdowns\"",894794,34,",align:\"stretch\"}},{xtype:\"panel\",title:\"CheckLists Changes\",name:\"changes\",html:\"CheckLists Changes\"",894794,34,",align:\"stretch\"}}],listeners:{}}},getFirst",919734,397,"title:\"Genera",920128,8003,"if(Ext.os.deviceType==\"Desktop\"){",928131,752,"}",928884,402]